<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://docs.trustgrid.io/docs/nodes/><link rel=alternate type=application/rss+xml href=https://docs.trustgrid.io/docs/nodes/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Nodes |</title><meta name=description content="Trustgrid Network Device and API documentation"><meta property="og:title" content="Nodes"><meta property="og:description" content="Trustgrid Network Device and API documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://docs.trustgrid.io/docs/nodes/"><meta itemprop=name content="Nodes"><meta itemprop=description content="Trustgrid Network Device and API documentation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nodes"><meta name=twitter:description content="Trustgrid Network Device and API documentation"><link rel=preload href=/scss/main.min.cd8ef62840094746f6b6a72f022aa002a82f35bfec4c2eff8212bf451c91cd1b.css as=style><link href=/scss/main.min.cd8ef62840094746f6b6a72f022aa002a82f35bfec4c2eff8212bf451c91cd1b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99793053-3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-99793053-3")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469 106"><defs><style>.cls-1{fill:#6b6b6b}.cls-2{fill:#226ce0}</style></defs><title>Trustgrid-Logo-Grey</title><path class="cls-1" d="M.35 28.58H29.26V-.33H.35zM7.13 6.45H22.47V21.8H7.13z"/><path class="cls-1" d="M67.82-.33H38.9V28.58H67.82zM61 21.8H45.68V6.45H61z"/><path class="cls-1" d="M.35 67.13H29.26V38.22H.35zM7.13 45H22.47V60.35H7.13z"/><path class="cls-1" d="M106.36 38.22H77.45v12.3H67.82V41.27L85.26 23.83l-3.06-3L64.76 38.22H38.9V67.13H67.82V54.83h9.63v12.3h12.3V80.39h4.31V67.13h12.3zM61 60.35H45.68V45H61zm38.55.0H84.23V45H99.58z"/><path class="cls-1" d="M.35 105.69H29.26V76.77H.35zM7.13 83.55H22.47V98.9H7.13z"/><path class="cls-1" d="M38.9 105.69H67.82V76.77H38.9zm6.78-22.14H61V98.9H45.68z"/><path class="cls-2" d="M153.94 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22H140V38.78h13.2v5.78H140V67q0 3.59 1.31 5.13a4.8 4.8.0 003.91 1.55 13.59 13.59.0 006.67-2z"/><path class="cls-2" d="M176.74 39.56A18 18 0 01186 37.07V44.4q-6.58-.24-10.66 3.42a14.51 14.51.0 00-4.64 9.85V80.39h-7.57V37.32h7.57V46.6a15.52 15.52.0 016-7"/><path class="cls-2" d="M232.34 37.32V80.39h-7.65V71.27q-4.23 9.2-16 9.36-7.48.0-11.72-4.44t-4.24-12.25V37.32h7.66V61.9q0 5.46 3 8.51a10.87 10.87.0 008.18 3.06 12.11 12.11.0 009.57-4.28 16 16 0 003.54-10.7V37.32z"/><path class="cls-2" d="M260.47 44.24a21.21 21.21.0 00-6.15-1 10.48 10.48.0 00-5.49 1.26 4.21 4.21.0 00-2.08 3.87 4.3 4.3.0 002.32 4 34.68 34.68.0 007 2.73 54.86 54.86.0 017.33 2.6 13 13 0 014.85 3.83 10.51 10.51.0 012 6.67 10.58 10.58.0 01-4.6 9.29 19.65 19.65.0 01-11.44 3.17 28.35 28.35.0 01-9.32-1.55 21.07 21.07.0 01-7.61-4.39l2.85-5.54a20.07 20.07.0 006.63 3.91 22 22 0 007.69 1.47 11.45 11.45.0 006-1.39 4.61 4.61.0 002.28-4.23 4.82 4.82.0 00-2.4-4.4 32.85 32.85.0 00-7.29-2.93 48.4 48.4.0 01-7-2.48 12.43 12.43.0 01-4.64-3.71A10 10 0 01239.5 49q0-6 4.4-9a19.07 19.07.0 0111-3 27.13 27.13.0 017.69 1.1 23 23 0 016.56 3l-2.77 5.78a26 26 0 00-5.9-2.6"/><path class="cls-2" d="M303.42 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22h7.65V38.78h13.19v5.78H289.49V67c0 2.39.44 4.1 1.3 5.13a4.81 4.81.0 003.91 1.55 13.62 13.62.0 006.68-2z"/><path class="cls-1" d="M352.92 36.34V76.48a19.18 19.18.0 01-3 10.71 19.61 19.61.0 01-8.43 7.08A29.79 29.79.0 01329 96.75a36.74 36.74.0 01-10.66-1.54 34 34 0 01-9-4.16l5.05-10a25.68 25.68.0 006.51 3.17 22.5 22.5.0 007.08 1.14 12.11 12.11.0 007.74-2.27 7.52 7.52.0 002.85-6.2V72.16Q334.12 77.95 326 78a17.69 17.69.0 01-16.41-10.14 24.71 24.71.0 01-2.4-11.12 24.42 24.42.0 012.32-10.91A17.35 17.35.0 01316 38.46a17.92 17.92.0 019.61-2.61A17.42 17.42.0 01333 37.36a14.36 14.36.0 015.5 4.35V36.34zM336.07 64.51a11 11 0 002.44-7.41 11.16 11.16.0 00-2.44-7.49 8.69 8.69.0 00-12.91.0 11 11 0 00-2.48 7.45 10.85 10.85.0 002.48 7.41 8.18 8.18.0 006.47 2.85 8.08 8.08.0 006.44-2.85"/><path class="cls-1" d="M383.9 37.8a16.63 16.63.0 018.26-2V49c-.49.0-1.22-.08-2.2-.08a13.4 13.4.0 00-8.3 2.4A9.18 9.18.0 00378 57.92V80.39H363.5v-44H378v7.33a16 16 0 015.9-5.87"/><path class="cls-1" d="M411.09 18.22a7.55 7.55.0 012.16 5.58 7.59 7.59.0 01-2.16 5.54 8 8 0 01-11 0 7.59 7.59.0 01-2.16-5.54 7.55 7.55.0 012.16-5.58 8.1 8.1.0 0111 0M398.51 36.34h14.41V80.39H398.51z"/><path class="cls-1" d="M468.45 20V80.39H454v-5.7a14.92 14.92.0 01-5.58 4.68A16.94 16.94.0 01440.93 81a20.15 20.15.0 01-10.75-2.85 19.16 19.16.0 01-7.2-8 26.51 26.51.0 01-2.57-11.93 25.77 25.77.0 012.53-11.72A18.6 18.6.0 01430 38.62a20.05 20.05.0 0110.59-2.77 17.24 17.24.0 017.61 1.63A16.19 16.19.0 01454 42.12V20zm-17.1 46.5A11.77 11.77.0 00454 58.57a11.76 11.76.0 00-2.61-8 8.58 8.58.0 00-6.84-3 8.67 8.67.0 00-6.88 3.05A11.69 11.69.0 00435 58.57a11.68 11.68.0 002.64 7.93 8.68 8.68.0 006.88 3.06 8.53 8.53.0 006.84-3.06"/><path class="cls-2" d="M99.58 21.8H84.23V6.46H99.58zM106.36-.33H77.45V28.59h28.91z"/><path class="cls-2" d="M99.58 98.9H84.23V83.55H99.58zm6.78-22.13H77.45v28.92h28.91z"/></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/getting-started/><span>Getting Started</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/tutorials/><span>Guides</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/help-center/><span>Help Center</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/release-notes/><span>Release Notes</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.ba156c9ed587682de0400d63aca76a0b.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/nodes/>Return to the regular view of this page</a>.</p></div><h1 class=title>Nodes</h1><ul><li>1: <a href=#pg-d7fdb8cb5e1dec765df17606d750cce2>Audits</a></li><li>2: <a href=#pg-c8b01f705d11f3d3df89e356289063a6>Cluster</a></li><li>3: <a href=#pg-9ef176addd38dc0e9e9b2983d8e7d3ed>Connectors</a></li><li>4: <a href=#pg-ae4fa3981878dd313eca3066c64985da>Containers</a></li><ul><li>4.1: <a href=#pg-5ccaebd2e7402426ca232ab21fd17b0d>Images</a></li><li>4.2: <a href=#pg-c0435eb8982792b817dbfaa0c19e05a4>Volumes</a></li></ul><li>5: <a href=#pg-3c699be0ddca870e8d6e606ad582d4bc>Data Plane</a></li><li>6: <a href=#pg-d21c2b68554aa101deaea0c4080ee190>Data Store</a></li><ul><li>6.1: <a href=#pg-3f449956de7bc5c2793acbee99216557>Directory Creation</a></li><li>6.2: <a href=#pg-0d7511ec1d06acf36268d561b7a63fc5>File Sync</a></li></ul><li>7: <a href=#pg-353040bdd30d1a2b8bead622d0957bc0>Flow Logs</a></li><li>8: <a href=#pg-a18fadeb0bf3b6f83e8a3d9ba070268c>Gateway</a></li><li>9: <a href=#pg-eb9766a9e1acf45aa692e5897d84bff0>Interfaces</a></li><li>10: <a href=#pg-eaf72e74ce2b77244adedb5e0add01cd>Location</a></li><li>11: <a href=#pg-b4381b03b9c0ce57a7f890b328662777>Overview</a></li><li>12: <a href=#pg-14d3f17506c0f6a32a59e909f3258b68>Services</a></li><li>13: <a href=#pg-824bd946b12a606a115dd628a2830c67>SNMP</a></li><ul><li>13.1: <a href=#pg-f9e99eb83460dac80a12d5d93363b352>OIDs</a></li></ul><li>14: <a href=#pg-4c6bb6eb8a966c5bdb819b6df3d325bb>Thresholds</a></li><li>15: <a href=#pg-db262ef25bdb30f2917537a56c918a75>Tags</a></li><ul><li>15.1: <a href=#pg-5761e36c5d92eb91d4d3e7baba472df1>Production Status Tags</a></li></ul><li>16: <a href=#pg-e524791e0063d6054d27793e0129ae3a>Tunnels</a></li><ul><li>16.1: <a href=#pg-b11c1ac5de2d23047eeaef34bbcc36e8>GRE</a></li><li>16.2: <a href=#pg-fc27731e4eecf141cc42060191de9c42>IPSec</a></li><li>16.3: <a href=#pg-abc39047a89af94602ada4991017aa16>VNET</a></li><li>16.4: <a href=#pg-190881abc353f27a6db97e6bf2dab78b>Wireguard</a></li></ul><li>17: <a href=#pg-a7d8b07ab0f225311892826abc807d5b>Virtual Machines</a></li><ul><li>17.1: <a href=#pg-943f246638aa3e393a8f6d60aece36bf>Images</a></li><li>17.2: <a href=#pg-67bfa9c81db7a9fa409661e2d045f475>Volumes</a></li></ul><li>18: <a href=#pg-1112cde592bd4c482ee61f51bcf95e86>VPN</a></li><ul><li>18.1: <a href=#pg-900c3294b54df2ae1f523685155ffe0b>DNS</a></li><li>18.2: <a href=#pg-08853da200adfe5357ff18d4b5e6158c>Dynamic Routing</a></li><li>18.3: <a href=#pg-c181d836618306bbfdddca7c43ba4103>NATs</a></li><li>18.4: <a href=#pg-97c2667991f3a82dffa39a3c14315bd7>Port Forwarding</a></li><li>18.5: <a href=#pg-dfaf2586eec001c16d7973b3af3fc2aa>Static Routing</a></li><li>18.6: <a href=#pg-20ab08d0a7033f3ac55b1a0c701ebc91>WireGuard ®</a></li></ul><li>19: <a href=#pg-306998c1febf46a2910b5bfdf20d10b3>VRFs</a></li><li>20: <a href=#pg-33917e1b3920bc4b4a41eb8fa67d6c27>ZTNA Gateway</a></li></ul><div class=content><div class="pageinfo pageinfo-primary"><p>A node is an instance of software used for building connections, managing compute resources, and deploying software.</p></div><h2 id=node-types>Node Types</h2><p>A node can be installed on a hardware appliance, as a virtual appliance (Vsphere and Hyper-V), and deployed in a public cloud (Amazon AMI, Google, Microsoft). There are three main types of nodes - Edge, Gateway, and Management.</p><p>All Trustgrid nodes run on a hardened Ubuntu operating system. Nodes are managed through the Trustgrid portal or via the API (requires authentication token). A local UI exists to support the reconfiguration of an ethernet interface and diagnostic/network tests prior to connection to the Portal.</p><h3 id=edge-nodes>Edge Nodes</h3><p>Edge Nodes build outgoing TLS tunnels to Gateway Nodes. Bidirectional traffic is supported through this tunnel, subject to ACLs and <a href=https://docs.trustgrid.io/getting-started/security/>security</a> policy restrictions. Edge Nodes will only require a firewall rule change if outbound internet restrictions are in place. Edge nodes can be a target for software deployment. Edge Nodes can be deployed with a single or multiple ethernet connections to support deployments behind a firewall or adjacent to a firewall (public WAN / private LAN).</p><h3 id=gateway-nodes>Gateway Nodes</h3><p>Gateway Nodes accept incoming TLS tunnels from Edge Nodes. Traffic on these tunnels is bidirectional, as permitted by ACLs or policy. Gateway Nodes usually require a firewall change to permit the incoming traffic. Gateway Nodes are identical to Edge Nodes but with a gateway configuration applied. Gateway nodes only connect to other gateways if one is of type <code>hub</code>. Read more about <a href=https://docs.trustgrid.io/docs/nodes/gateway/>gateway configuration</a>.</p><h3 id=management-nodes>Management Nodes</h3><p>Management Nodes are not like other <a href=https://docs.trustgrid.io/docs/nodes/>nodes</a> because they do not connect to the data plane, only the control plane. Management Nodes are deployed by Trustgrid for each customer and are multi-tenant like other control plane components. Customers may elect to deploy their own Management Nodes in place of multi-tenant Management Nodes. Management Nodes facilitate the monitoring, management, and support of Edge and Gateway Nodes.</p><h2 id=node-list-view>Node List View</h2><h3 id=adding-a-tag-as-a-column-on-the-nodes-table>Adding a Tag as a Column on the Nodes Table</h3><p>Adding a tag as a column on the nodes tables is good way to make valuable information visible for multiple nodes at the same time. To add the column:</p><ol><li>Navigate to the nodes table page</li><li>Click <code>Actions</code> and then select <code>Columns</code> from the dropdown</li></ol><p><img src=add-column.png alt=img></p><ol start=3><li>Towards the bottom you will see all the available tags in the format <code>tag: tag-name</code>. Select the desired tag and click <code>Save</code>.</li></ol><p><img src=select-tag-column.png alt=img></p><p>The column will be added and the table can now be sorted by that column. Any node that does not have that tag set will be listed as blank.</p><p><img src=tag-column2.png alt=img></p><h3 id=applying-a-tag-filter-to-the-nodes-table>Applying a Tag Filter to the Nodes Table</h3><p>The nodes table can also be filtered to only show nodes with a specific tag name:value.</p><ol><li>On the nodes table click <code>Actions</code> and select <code>Add Tag Filter</code> from the drop-down menu.</li></ol><p><img src=add-tag-filter-2.png alt=img></p><ol><li>After clicking <code>Add Tag Filter</code>, select the tag-name field and you will see a list of tag-names available. Select the desired tag.</li></ol><p><img src=pick-tag-filter-name2.png alt=img></p><p>You can also start typing to filter what tag names are shown.</p><ol start=3><li><p>Select the tag value field and you will see a list of available values. Select the desired value.</p></li><li><p>(Optional) Click <code>Add Tag Filter</code> to include an additional filter. Note that the two filters will be applied using AND only nodes with both tag name:value combinations matching will be shown.</p></li><li><p>Click <code>Apply Tag Filter</code> and the table will only show matching nodes.</p></li></ol><p><img src=applied-filters2.png alt=img></p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-d7fdb8cb5e1dec765df17606d750cce2>1 - Audits</h1><div class="pageinfo pageinfo-primary"><p>Node audits provide records when services on a node are invoked, or when upgrades are applied. This can be helpful to see historical maintenance of a node.</p></div><p>Node audits can be viewed for a specific node by navigating to <code>Audits</code> under the <code>History</code> section on the node view.</p><p>Users will need <code>audits::read:node</code> permissions to view node audits.</p><p><img src=node-list.png alt=img></p><p>Node audits can also be found for the entire organization by navigating to <code>Operations</code>-><code>Node Audits</code>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c8b01f705d11f3d3df89e356289063a6>2 - Cluster</h1><div class="alert alert-primary" role=alert>Cluster configuration is only available for nodes that are members of a <a href=https://docs.trustgrid.io/docs/clusters/>cluster</a>.</div><h2 id=heartbeat>Heartbeat</h2><p>The cluster heartbeat defines a persistent connection between cluster members. The heartbeat is used to determine the health of the cluster and to determine which member is the active member.</p><p><img src=heartbeat.png alt=img></p><tr><th>host</th><td>The IP (bound to an interface) on which heartbeat communication will occur</td></tr><tr><th>port</th><td>The port on which heartbeat communication will occur</td></tr><div class="alert alert-primary" role=alert>The same interface should be selected for all cluster members</div></div><div class=td-content style=page-break-before:always><h1 id=pg-9ef176addd38dc0e9e9b2983d8e7d3ed>3 - Connectors</h1><div class="pageinfo pageinfo-primary"><p>Connectors are configured in conjunction with <a href=https://docs.trustgrid.io/docs/nodes/services/>services</a> to define a local listening port for layer 4 (L4) connectivity.</p></div><h4 id=configuration>Configuration</h4><p>Connectors are configured under the Networking > Connectors tab of the node or cluster configuration section in the Trustgrid Portal.</p><figure class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:410px><img class=card-img-top src=/docs/nodes/connectors/connector_hudc115f7e28d8cbd5e71d65766f13265f_84798_400x450_resize_catmullrom_3.png width=400 height=450></figure><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Protocol</th><td><p>The protocol that the listener for the connector will use. Options are TCP, UDP, FTP, and TFTP.</p><blockquote><p>FTP must operate in passive mode when using L4 services and connectors.</p></blockquote></td></tr><tr><th>Listen Interface</th><td>The interface that you want the connector to listen on. If set to &ldquo;All&rdquo;, the connector will listen on 0.0.0.0.</td></tr><tr><th>Listen Port</th><td>The port that you want the connector to listen on.</td></tr><tr><th>Remote Node</th><td>The remote node or cluster that traffic will be proxied to.</td></tr><tr><th>Remote Service</th><td>Either the friendly name of <a href=https://docs.trustgrid.io/docs/nodes/services/>service</a> that is defined on the remote node, or the IP:Port of the remote service to connect to.</td></tr><tr><th>Rate Limit (Mb/s)</th><td>The maximum amount of throughput that will be allowed to traverse the tunnel when connecting to the connector. This can be used to prevent saturating the connection at either the local or remote sites.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ae4fa3981878dd313eca3066c64985da>4 - Containers</h1><p>Trustgrid nodes support running Docker containers which allows for ease of deployment across an organization. Any Docker container is supported with the exception of containers that require root level access.</p><p>The container can be attached to both the local and virtual network space which allows both local and remote resources to communicate with the container. For example an API could be deployed on a Trustgrid Gateway which sends API Calls via the virtual network space to a container running on a Trustgrid Edge Node. The API call could then be translated to make a call to a database running on the local network and passed back up to the gateway host.</p><p>Before adding a container to a node, push an image to your <a href=https://docs.trustgrid.io/docs/repositories/>repository</a>.</p><p>Reading and managing containers requires <code>node-exec::read</code> and <code>node-exec::modify</code> permissions, respectively. Executing a container requires <code>node-exec::compute</code> permission.</p><h2 id=management>Management</h2><p>Navigate to <code>Container Management</code> under <code>Compute</code> on a node or cluster.</p><p><img src=containers-list.png alt="Containers List View"></p><p>Here you can add, enable, disable, delete, and import a container.</p><p><img src=add-container.png alt="Add Container Modal"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The name of the container.</td></tr><tr><th>Execution Type</th><td><p>A container can be deployed as one of three types.</p><ol><li><p><strong>Service</strong> - the container is created and will run as a daemon. If the node reboots, the container will start up automatically.</p></li><li><p><strong>Recurring</strong> - the container will run on a defined schedule. A schedule parameter is defined for the frequency, either as a rate or a <a href=https://crontab.guru/examples.html>cron expression</a>.</p><table><thead><tr><th>Rate</th><th>Description</th></tr></thead><tbody><tr><td><code>rate(30 minutes)</code></td><td>Run every 30 minutes</td></tr><tr><td><code>rate(1 hour)</code></td><td>Run every hour</td></tr><tr><td><code>rate(1 day)</code></td><td>Run every day</td></tr></tbody></table></li><li><p><strong>On Demand</strong> - typically used for testing. The container is executed for a single session, but will not restart on its own.</p></li></ol></td></tr><tr><th>Status</th><td>Only enabled containers will run.</td></tr><tr><th>Image Name</th><td>The name of the image to execute.</td></tr><tr><th>Image Tag</th><td>The image tag to execute.</td></tr></tbody></table><h2 id=overview>Overview</h2><p>Navigating into a container, the overview section allows editing basic information about the container&rsquo;s execution environment.</p><p><img src=overview.png alt="Container Overview"></p><p>In addition to the fields above, you can modify:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Command</th><td>The command to execute inside the container.</td></tr><tr><th>Hostname</th><td>The hostname set inside the container.</td></tr><tr><th>Stop Time</th><td>The grace period (in seconds) to allow a container to stop before killing it. Defaults to 30 seconds.</td></tr><tr><th>User</th><td>Sets the username or group or uid or gid in the container.</td></tr><tr><th>Save Output</th><td>Persist standard output/standard error.</td></tr><tr><th>Privileged</th><td>Grant the container extended privileges.</td></tr><tr><th>Use Init</th><td>Use an init process inside the container as PID 1. This ensures responsibilities of an init system are performed inside the container (e.g., handling exit signals).</td></tr><tr><th>Require Connectivity</th><td>Ensures that the container will not start if it has encrypted volumes and is unable to reach the control plane.</td></tr></tbody></table><h2 id=environment-variables>Environment Variables</h2><p>Environment variables can be added to a container to provide configuration information to the container at runtime.</p><p><img src=envvars.png alt="Environment Variables"></p><h2 id=network>Network</h2><p>The networking section allows you to configure the container&rsquo;s VRF, its port mappings, and its virtual networks and interfaces.</p><p><img src=network.png alt="Container Network"></p><h3 id=host-port-mappings>Host Port Mappings</h3><p>Host port mappings allow you to expose a port on the host to the container. This is useful for exposing a service running in the container to the local network.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Protocol</th><td>The protocol to listen for. If not specified, all traffic is forwarded to the container.</td></tr><tr><th>Host Interface</th><td>The host interface to listen on.</td></tr><tr><th>Host Port</th><td>The host port to listen on.</td></tr><tr><th>Container Port</th><td>The container port that will receive the mapped traffic.</td></tr></tbody></table><h3 id=virtual-networks>Virtual Networks</h3><p>Attaching a virtual network to a container allows virtual network traffic to reach it.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Virtual Network</th><td>The virtual network to attach.</td></tr><tr><th>Virtual IP</th><td>The virtual IP to assign to the container.</td></tr><tr><th>Allow Outbound</th><td>Whether the container should be allowed to make outbound connections into the virtual network.</td></tr></tbody></table><h3 id=virtual-interfaces>Virtual Interfaces</h3><p>A virtual interface can be mapped to a container to forward all traffic.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The virtual interface name.</td></tr><tr><th>Destination</th><td>The interface destination inside the container.</td></tr></tbody></table><h2 id=mounts>Mounts</h2><p>Mounts allow a container to persist data either as an externally defined <a href=https://docs.trustgrid.io/docs/nodes/containers/volumes/>volume</a>, or a bind mount of the node&rsquo;s filesystem.</p><p><img src=mounts.png alt="Container Mounts"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Type</th><td>Either <code>BIND</code> or <code>VOLUME</code>. For type <code>VOLUME</code>, the mount must reference an existing <a href=https://docs.trustgrid.io/docs/nodes/containers/volumes/>volume</a>.</td></tr><tr><th>Source</th><td>For volumes, the name of the volume. For bind mounts, the path on the node&rsquo;s filesystem.</td></tr><tr><th>Destination</th><td>The mount location inside the container.</td></tr></tbody></table><h2 id=resource-limits>Resource Limits</h2><p>Containers can be restricted to limit the amount of resources they can consume from the host.</p><p><img src=limits.png alt="Container Resource Limits"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>CPU Max %</th><td>Maximum CPU allocation. Default is 50%.</td></tr><tr><th>Memory Max (MB)</th><td>Hard limit for RAM allocation. Default is 50% of the host&rsquo;s memory.</td></tr><tr><th>Memory High (MB)</th><td>Soft limit for RAM allocation. Cannot exceed hard limit. Default is 45% of the host&rsquo;s memory.</td></tr><tr><th>IO Max Read (B/s)</th><td>Max allowed bytes per second of IO reads. Disabled by default.</td></tr><tr><th>IO Max Write (B/s)</th><td>Max allowed bytes per second of IO writes. Disabled by default.</td></tr><tr><th>IO Max Read Operations (ops/s)</th><td>Max allowed IO read operations per second. Disabled by default.</td></tr><tr><th>IO Max Write Operations (ops/s)</th><td>Max allowed IO write operations per second. Disabled by default.</td></tr></tbody></table><p>Linux ulimits can be set for each container. Supported ulimits are:</p><ul><li>CORE</li><li>DATA</li><li>FSIZE</li><li>LOCKS</li><li>MEMLOCK</li><li>MSGQUE</li><li>NICE</li><li>NOFILE</li><li>NPROC</li><li>RSS</li><li>RTPRIO</li><li>RTTIME</li><li>SIGPENDING</li><li>STACK</li></ul><h2 id=health-check>Health Check</h2><p>A health check can be configured to monitor the container&rsquo;s health. If the health check fails, the container will be restarted.</p><p><img src=health-check.png alt="Container Health Check"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Command</th><td>The command to run. A non-zero return code indicates a health check failure.</td></tr><tr><th>Interval</th><td>The frequency (in seconds) to run the health check.</td></tr><tr><th>Timeout</th><td>How long (in seconds) to wait for the health check to complete. A timeout is considered a failure.</td></tr><tr><th>Start Period</th><td>Grace period (in seconds) during container startup before health checks should start.</td></tr><tr><th>Retries</th><td>Number of allowed health check failures before marking the container unhealthy.</td></tr></tbody></table><h2 id=linux-capabilities>Linux Capabilities</h2><p>Linux capabilities can be added to or removed from a container, allowing fine-grained control over kernel-level features and device access.</p><p><img src=capabilities.png alt="Container Linux Capabilities"></p><h2 id=logging-configuration>Logging Configuration</h2><p>Log files (when persisting container output) are rotated based on a size threshold.</p><p><img src=logging.png alt="Container Logging Configuration"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Max File Size (MB)</th><td>The maximum size (in MB) of a log file before it is rotated.</td></tr><tr><th>Max Files</th><td>The maximum number of log files to keep.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-5ccaebd2e7402426ca232ab21fd17b0d>4.1 - Images</h1><p>The images section shows the container images that have been downloaded to the node. They may be deleted to free up space.</p><p><img src=images.png alt="Container Images"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c0435eb8982792b817dbfaa0c19e05a4>4.2 - Volumes</h1><p>Volumes allow containers to persist data between executions.</p><p><img src=volumes.png alt="Container Volumes"></p><h2 id=create-a-volume>Create a Volume</h2><p><img src=add-volume.png alt="Add Volume Modal"></p><p>Volumes have the following fields:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The name of the volume.</td></tr><tr><th>Encrypted</th><td>Whether or not to encrypt the volume. Encrypted volumes The type of volume.</td></tr><tr><th>Location</th><td>Optionally, specify a location in the node <a href=https://docs.trustgrid.io/docs/nodes/datastore/>data store</a>.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-3c699be0ddca870e8d6e606ad582d4bc>5 - Data Plane</h1><div class="pageinfo pageinfo-primary"><p>Data plane statistics between a node and its peers can help troubleshoot connectivity or performance issues.</p></div><p>To view latency data between two nodes, select either the edge or gateway node, and then from the peers table, select the node to view.</p><div class="alert alert-info" role=alert>Gateway nodes will list edge nodes in their peers table</div><p><img src=peer-list.png alt=img></p><p>Once a peer is selected, the monitoring section will populate with reelvant data.</p><p><img src=monitoring.png alt=img></p><p>Hop data is only available for nodes that have hop monitoring enabled. See <a href=https://docs.trustgrid.io/tutorials/gateway-tools/monitoring-network-hops-to-peers/>Monitoring Network Hops to Peers</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d21c2b68554aa101deaea0c4080ee190>6 - Data Store</h1><div class="pageinfo pageinfo-primary"><p>The data store allows artifacts (i.e. container volumes, virtual machine images) to be synced from/to a node. The data store view is located under Compute > Data Store.</p></div><h3 id=file-explorer>File Explorer</h3><p>Allows a user to navigate, sync, create directories, delete artifacts from the data store.</p><p><img src=file_explorer.png alt=img></p><ul><li><img src=home.png alt=img> - Takes you to the Root of the directory hierarchy.</li><li><img src=back.png alt=img> - Takes you up one directory from your current location in the directory hierarchy.</li><li><img src=refresh.png alt=img> - Refreshes the directory hierarchy to get the latest state of the data store.</li><li><img src=create_dir.png alt=img> - Create a new sub directory. See <a href=https://docs.trustgrid.io/docs/nodes/datastore/mkdir/>Directory Creation</a> for more information</li><li><img src=sync.png alt=img> - Transfer a file to the data store. See <a href=https://docs.trustgrid.io/docs/nodes/datastore/sync/>File Sync</a> for more information</li><li><img src=upload.png alt=img> - Upload a file from the data store. See <a href=https://docs.trustgrid.io/docs/nodes/datastore/sync/>File Sync</a> for more information</li><li><img src=delete.png alt=img> - Delete a file from the data store.</li></ul><h3 id=recent-tasks>Recent Tasks</h3><p>Allows a user to view the status of any long running tasks (i.e. Transfer file from Amazon S3, Upload file to HTTP endpoint, etc). Any task that is executing can be cancelled. Completed tasks can be cleared manually or they will be automatically removed 6 hours after completion time.</p><p><img src=recent_tasks.png alt=img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-3f449956de7bc5c2793acbee99216557>6.1 - Directory Creation</h1><div class="pageinfo pageinfo-primary"><p>Data store directory creation allows you to add new directories to organize your files in a hierarchical, tree-like structure.</p></div><p><img src=mkdir.png alt=img></p><div class="alert alert-info" role=alert>The destination where the directory will be created can be changed by selecting a particular directory as the parent from the <a href=https://docs.trustgrid.io/docs/nodes/datastore/>File Explorer</a> side bar.</div><p><img src=mkdir_config.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Parent Directory</th><td>The data store location where this directory will created.</td></tr><tr><th>Name</th><td>The name of the directory to create.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-0d7511ec1d06acf36268d561b7a63fc5>6.2 - File Sync</h1><div class="pageinfo pageinfo-primary"><p>File syncing allows a user to transfer files to the data store as well as upload files from the data store.</p></div><h2 id=transfer-files>Transfer Files</h2><p>A user can populate the data store by transferring files from an Amazon S3 bucket or from an HTTP endpoint.</p><p><img src=file_explorer_toolbar_sync.png alt=img></p><div class="alert alert-info" role=alert>The destination where the file will be stored can be changed by selecting a particular directory from the <a href=https://docs.trustgrid.io/docs/nodes/datastore/>File Explorer</a> side bar.</div><h4 id=amazon-s3-transfer>Amazon S3 Transfer</h4><p>A user can select to transfer a file from an S3 URI.</p><p><img src=amazon_s3_transfer.png alt=img></p><h5 id=sync-file>Sync File</h5><p><img src=s3_transfer.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>S3 URI</th><td>The S3 URI for the location of the file to transfer.</td></tr><tr><th>Datastore Destination</th><td>The data store location where the file will be transferred to.</td></tr></tbody></table><h5 id=configure-authentication>Configure Authentication</h5><p>In order to be able to utilize the S3 File Sync option, valid AWS credentials need to be configured on the node for the applicable S3 buckets.</p><h5 id=configure-bandwidth-throttling>Configure Bandwidth Throttling</h5><p>The S3 File Sync service will always try to utilize as much bandwidth as possible to perform the transfer of the file. If the amount of bandwidth needs to be limited, a user can configure the amount of bandwidth allowed to be utilized in Kbps/Mbps/Gbps.</p><p><img src=s3_bandwidth.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Max Concurrent Requests</th><td>The maximum number of concurrent requests allowed.</td></tr><tr><th>Max Bandwidth</th><td>The maximum bandwidth that will be consumed for uploading and downloading data to and from Amazon S3.</td></tr><tr><th>Bandwidth Rate</th><td>Rate associated to the Max Bandwidth specified. Supported values are Kbps, Mbps, and Gbps.</td></tr></tbody></table><div class="alert alert-info" role=alert>In general, it is recommended to first use Max Concurrent Requests to lower transfers to the desired bandwidth consumption. The Max Bandwidth setting would then be used to further limit bandwidth consumption if setting Max Concurrent Requests is unable to lower bandwidth consumption to the desired rate.</div><h4 id=http-endpoint-transfer>HTTP Endpoint Transfer</h4><p>A user can select to transfer a file from an HTTP endpoint. The endpoint has to be unauthenticated since the node currently doesn&rsquo;t support providing credentials.</p><p><img src=http_transfer.png alt=img></p><h5 id=sync-file-1>Sync File</h5><p><img src=http_transfer_config.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>HTTP URI</th><td>The HTTP URI for the location of the file to transfer.</td></tr><tr><th>Datastore File Name</th><td>The transferred file will be saved with this name under the datastore destination.</td></tr><tr><th>Hash (Optional)</th><td>Optional fields used to validate the integrity of the transferred file.</td></tr><tr><th>Hashing Algorithm</th><td>If a hash is specified, this specifies the hashing algorithm used during validation of the file.</td></tr></tbody></table><hr><p>Upload Files</p><p>A user can extract files from the datastore by uploading them to an Amazon S3 bucket or to an HTTP endpoint.</p><p><img src=file_upload.png alt=img></p><div class="alert alert-info" role=alert>A file needs to be selected first before the File Upload button gets enabled on the <a href=https://docs.trustgrid.io/docs/nodes/datastore/>File Explorer</a> menu bar.</div><h4 id=amazon-s3-upload>Amazon S3 Upload</h4><p>A user can select to transfer a file to an S3 URI.</p><p><img src=s3_upload.png alt=img></p><h5 id=file-upload>File Upload</h5><p><img src=s3_upload_config.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>S3 Bucket URI</th><td>The S3 bucket URI for the location where the file will be uploaded.</td></tr><tr><th>Datastore File</th><td>The data store file to upload.</td></tr></tbody></table><div class="alert alert-info" role=alert>For configuration of AWS authentication and Bandwidth Throttling refer to <a href=#configure-authentication>Configure Authentication</a> and <a href=#configure-bandwidth-throttling>Configure Bandwidth Throttling</a></div><h4 id=http-endpoint-upload>HTTP Endpoint Upload</h4><p>A user can select to upload a file to an HTTP endpoint. The endpoint has to be unauthenticated since the node currently doesn&rsquo;t support providing credentials.</p><p><img src=http_upload.png alt=img></p><h5 id=file-upload-1>File Upload</h5><p><img src=http_upload_config.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>HTTP URI</th><td>The HTTP URI for the location where the file will be uploaded.</td></tr><tr><th>Datastore File</th><td>The data store file to upload.</td></tr><tr><th>Use Multipart</th><td>Used to denote if multipart should be used when uploading the file. True for use multipart and false otherwise.</td></tr></tbody></table><div class="alert alert-info" role=alert>The node uses the POST method to perform the HTTP upload</div></div><div class=td-content style=page-break-before:always><h1 id=pg-353040bdd30d1a2b8bead622d0957bc0>7 - Flow Logs</h1><div class="pageinfo pageinfo-primary"><p>Flow logs are a record of all traffic that passes through a node. They can be used to troubleshoot connectivity issues, or to monitor traffic patterns.</p></div><p>Flow logs for an individual node can be found under the <code>History</code> section of the node view. Click the <code>Flow Logs</code> tab to view the logs. For the entire organization across all nodes, navigate to <code>Operations</code>-><code>Flow Logs</code>.</p><p>By default, newest flows will be shown first.</p><p><img src=flow-logs-table.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Start Time</th><td>The time the flow started</td></tr><tr><th>End Time</th><td>The time the flow ended</td></tr><tr><th>Protocol</th><td>The protocol used</td></tr><tr><th>Source Node</th><td>The node that initiated the flow</td></tr><tr><th>Source IP</th><td>The IP address through which the node initiated the flow</td></tr><tr><th>Source Port</th><td>The port through which the node initiated the flow</td></tr><tr><th>Dest Node</th><td>The node that received the flow</td></tr><tr><th>Dest IP</th><td>The IP address to which traffic was sent</td></tr><tr><th>Dest Port</th><td>The port to which traffic was sent</td></tr><tr><th>Recv Bytes</th><td>Bytes received at the source node</td></tr><tr><th>Sent Bytes</th><td>Bytes sent from the source node</td></tr><tr><th>TCP Flags</th><td><p>TCP Flags set during the flow:</p><ul><li>SYN - sync packet</li><li>PSH - push packet</li><li>ACK - ack packet</li><li>URG - urgent packet</li><li>FIN - finish packet</li><li>RST - reset packet</li></ul></td></tr></tbody></table><h3 id=advanced-search>Advanced Search</h3><p>Flow logs can be filtered by any of the fields listed above. To filter by a field, click the <code>Advanced Search</code> button at the top right of the flow logs table.</p><p>In addition, the ordering can be changed so that oldest flows (or flows closest to the time range specified) can be shown first. There is a limit of 10,000 flows returned per search.</p><p><img src=advanced-search.png alt=img></p><h3 id=exporting-flow-logs>Exporting Flow Logs</h3><p>Trustgrid can export flow logs to any S3 bucket. Set your bucket name and apply the policy provided, and then Trustgrid will configure replication for your flow logs into your bucket.</p><p><img src=s3-export.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>S3 Bucket</th><td>The bucket name. You must own the S3 bucket and apply the policy in AWS to allow Trustgrid to replicate files to the bucket.</td></tr></tbody></table><h4 id=example-iam-policy-for-s3-export>Example IAM Policy for S3 Export</h4><p>Below is an example IAM policy with the required permissions to push flow logs to your S3 bucket. Be sure you replace <code>example-flowlogs</code> in lines 19 & 20 with the name of your bucket.</p><pre class="line-numbers language-json" data-line=19-20>
<code>{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "allow-tg-writes",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::079972220921:root"
      },
      "Action": [
        "s3:ReplicateObject",
        "s3:ReplicateDelete",
        "s3:ReplicateTags",
        "s3:List*",
        "s3:GetBucketVersioning",
        "s3:PutBucketVersioning"
      ],
      "Resource": [
        "arn:aws:s3:::example-flowlogs",
        "arn:aws:s3:::example-flowlogs/*"
      ]
    }
  ]
}
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-a18fadeb0bf3b6f83e8a3d9ba070268c>8 - Gateway</h1><div class="pageinfo pageinfo-primary"><p>Gateway nodes accept TLS tunnel connections from other nodes in the domain. They are responsible for routing traffic between nodes.</p></div><p>Gateways are only configurable at the node level. Configuring a gateway requires <code>nodes::configure:gateway</code> permissions.</p><h2 id=gateway-types>Gateway Types</h2><p>A gateway can be one of three types:</p><ul><li><code>public</code> - allows all connections from edge nodes in the domain</li><li><code>private</code> - allows only allow-listed clients to connect</li><li><code>hub</code> - allows connections from edge nodes and other gateway nodes</li></ul><p>A public gateway should be secured with a firewall to prevent unauthorized access.</p><h2 id=configuration>Configuration</h2><p>Navigate to a node and select <code>Gateway</code> under the <code>System</code> section.</p><p><img src=public-config.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Status</th><td>Either <code>Enabled</code> or <code>Disabled</code> - when enabled, the node will listen and accept connections from other nodes.</td></tr><tr><th>UDP Enabled</th><td>Whether to allow UDP tunnels to be established through this gateway.</td></tr><tr><th>Public IP or DNS</th><td>The public IP or DNS name of the gateway. This is the address that other nodes will use to connect to this gateway.</td></tr><tr><th>Port</th><td>The port that the gateway will listen on. This is the port that other nodes will use to connect to this gateway.</td></tr><tr><th>UDP Port</th><td>The port that the gateway will listen on for UDP tunnels. This is the port that other nodes will use to connect to this gateway.</td></tr><tr><th>Max Ingress Mbps</th><td>The ingress bandwidth limit for the gateway. Connections will be throttled when this limit is reached.</td></tr><tr><th>Certificate</th><td>When using DNS for gateway connections, you may specify an uploaded [certificate]({{ ref &ldquo;/docs/certificate&rdquo; }}) to use for TLS connections.</td></tr><tr><th>Gateway Type</th><td>The type of gateway. See <a href=#gateway-types>Gateway Types</a> for more information.</td></tr><tr><th>Monitor Network Hops to Peers</th><td>Whether to monitor latency to peers through this gateway. This can have a performance impact and is not recommended for high-traffic gateways.</td></tr></tbody></table><h3 id=client-settings>Client Settings</h3><p>Private gateways only allow connectivity from listed and enabled clients. To add a client, use the typeahead textbox at the bottom of the clients table and select the desired node.</p><p><img src=clients.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Max Egress Mbps</th><td>The egress bandwidth limit for the gateway. Connections will be throttled when this limit is reached.</td></tr></tbody></table><h4 id=mpls-traffic>MPLS Traffic</h4><p>Gateways of all types allow configuring paths for MPLS traffic.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>A name for the path.</td></tr><tr><th>Gateway Node</th><td>Gateway for which the path is applicable.</td></tr><tr><th>Host IP</th><td>Destination IP address for the path.</td></tr><tr><th>Host Port</th><td>Destination port for the path.</td></tr><tr><th>Local IP</th><td>Bind the connection to this IP address.</td></tr><tr><th>Use as Default</th><td>Make this the default path for the gateway.</td></tr></tbody></table><h2 id=gateway-tools>Gateway Tools</h2><p>To see detailed messages about gateway traffic, select the <code>Troubleshoot Gateway Traffic</code> option from the services menu under <code>Gateway Tools</code>.</p><p><img src=launch-troubleshoot-gateway-traffic.png alt=img></p><p>This will open a new window with live diagnostic messages about traffic</p><p><img src=troubleshoot-gateway-traffic.png alt=img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-eb9766a9e1acf45aa692e5897d84bff0>9 - Interfaces</h1><div class=lead>Configure and manage the node&rsquo;s local network configuration</div><h2 id=network-interfaces>Network Interfaces</h2><p>Navigate to a node, then select <code>Interfaces</code> under the <code>Network</code> section.</p><p><img src=interfaces.png alt="Interfaces Page"></p><p>The <code>Interface</code> dropdown at the top allows you to select which interface to manage.</p><p><img src=select-interface.png alt="Interface Dropdown"></p><h3 id=eth0---wan-interface>ETH0 - WAN Interface</h3><p>This interface is always used to build the outbound TLS tunnels for control and data plane connectivity. If the node is deployed in a single interface configuration, this interface will also be used for local network connectivity.</p><h3 id=eth1---lan-interface>ETH1 - LAN Interface</h3><p>Used in two-interface configurations for local network connectivity.</p><h2 id=configuration>Configuration</h2><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Hardware Address</th><td>MAC address of the interface.</td></tr><tr><th>IP Assignment (ETH0 only)</th><td><ul><li>DHCP - requires a DHCP server or relay in the same broadcast domain as the interface connection</li><li>Static - configured using the fields below</li></ul></td></tr><tr><th>IPv4 Address CIDR</th><td>IP address using <a href=https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing>classless inter-domain routing (CIDR) notation</a>.</td></tr><tr><th>Gateway IP</th><td><ul><li>ETH0 - The IP address of the default gateway for this device. All traffic not in the same network as an interface IP or with a specified route will use this gateway.</li><li>ETH1 - This is only used in a 2-interface setup to access local resources outside the interface&rsquo;s configured network. Routes must be defined.</li></ul></td></tr><tr><th>DNS Server 1/2 IP (ETH0 only)</th><td>Used to resolve DNS names to connect to the Trustgrid control plane.</td></tr><tr><th>Cluster Virtual IP</th><td>Used in <a href=https://docs.trustgrid.io/docs/clusters/>clusters</a>, this IP address is moved between member nodes based on the active cluster member. It can be used to route traffic between the virtual and local networks. This IP address can only be changed within the cluster interfaces page.</td></tr></tbody></table><h2 id=interface-routes>Interface Routes</h2><blockquote><p>If the node is part of a cluster, these must be configured at the cluster level</p></blockquote><p>These routes are used to access networks that are not in the same network as a configured interface <strong>and that are not accessed using the default gateway IP configured for ETH0 - WAN Interface</strong>. It is rare to need to define these on the ETH0 interface.</p><ol><li><p>Select the interface from the Network Interface dropdown.</p></li><li><p>Click the <code>+ Add Entry</code> button.</p></li><li><p>Enter the route information There are three fields:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Destination CIDR</th><td>This is the CIDR notation of the network or host that needs to be routed. For a single host, use /32 as the CIDR suffix.</td></tr><tr><th>Next Hop</th><td>The IP address to which traffic destined for the above defined network will be sent. No CIDR suffix is needed.</td></tr><tr><th>Description</th><td>Optional field to provide additional information about the route.</td></tr></tbody></table></li><li><p>Click the green check <i class="fa-solid fa-circle-check" style=color:green></i> to confirm the route.</p></li><li><p>Repeat steps 2-4 with any additional routes.</p></li><li><p>Click the <code>Save</code> button.</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-eaf72e74ce2b77244adedb5e0add01cd>10 - Location</h1><p>Trustgrid uses each node&rsquo;s public IP address to derive location information. If it&rsquo;s incorrect, the fields can be set manually. If set manually, IP changes will not update the node&rsquo;s location when viewed from the nodes table or the network map.</p><p><img src=node-location.png alt=img></p><h6 id=to-change-the-node-location>To change the Node Location:</h6><p>Change the details to desired settings then click <code>Save</code> when done.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b4381b03b9c0ce57a7f890b328662777>11 - Overview</h1><h3 id=stats>Stats</h3><p>The Node overview page shows performance and network traffic data.</p><p>Supported time windows are selectable at the top. VPN and network statistics can be targeted to specific virtual networks and interfaces.</p><p><img src=node-overview.png alt=img></p><p><img src=node-overview2.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Node Performance</th><td>shows CPU, disk, and memory usage percentages</td></tr><tr><th>VPN Traffic Volume</th><td>shows data usage sent and received, across all VPNs and for the selected virtual network</td></tr><tr><th>Traffic Volume</th><td>shows data sent and receives, across all interfaces and for the selected interface</td></tr><tr><th>Connected Peers</th><td>shows the number of other nodes connected. This will change based on the node type - gateways connect to all edge nodes, while edge nodes only connect to gateways.(LINK HUB GATEWAY PAGE WHEN DOCUMENTED)</td></tr><tr><th>VPN Flows</th><td>shows new and active flows, across all VPNs and for the selected virtual network</td></tr><tr><th>TCP Errors</th><td>shows TCP errors across all interfaces</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-14d3f17506c0f6a32a59e909f3258b68>12 - Services</h1><div class="pageinfo pageinfo-primary"><p>Services are configured in conjunction with <a href=https://docs.trustgrid.io/docs/nodes/connectors/>connectors</a> to define a remote host:port to connect to for layer 4 (L4) connectivity.</p></div><h4 id=configuration>Configuration</h4><p>Services are configured under the Networking > Services tab of the node or cluster configuration section in the Trustgrid Portal.</p><p><img src=service.png alt="Layer 4 - Add a service"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Protocol</th><td>The protocol of the service to connect to. Options are TCP, UDP, FTP, and TFTP, along with pre-defined default ports for RDP, SSH, and VNC.</td></tr>> FTP must operate in passive mode when using L4 services and connectors<tr><th>Service Name</th><td>A friendly name for the service that will be used in the Remote Service field of a <a href=https://docs.trustgrid.io/docs/nodes/connectors/>connector</a>.</td></tr><tr><th>Host</th><td>The IP of the host to connect to.</td></tr><tr><th>Port</th><td>The port to connect to on the host.</td></tr><tr><th>Health Check</th><td>A health check can be configured for TCP services. The health check will attempt a TCP connectivity check once per minute. After 5 consecutive failures, an Outbound L4 Service Health Check alert will be triggered and clustered nodes will be marked as unhealthy. Clustered nodes will return to a Healthy status after 5 consecitive connection attempts are successful.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-824bd946b12a606a115dd628a2830c67>13 - SNMP</h1><div class="pageinfo pageinfo-primary"><p>Trustgrid Nodes support SNMP Version 3 for the monitoring of various node resources.</p></div><h4 id=configuration>Configuration</h4><p>SNMP is configured under the SNMP tab of the configuration section of the node in the Trustgrid Portal.</p><p>Configure all fields and click save. Then set the status to enabled which will start the SNMP service on the node.</p><p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Status</th><td>Set to enabled to start SNMP service. Setting to disabled will retain the configuration but stop the SNMP service on the node.</td></tr><tr><th>Engine ID</th><td>Automatically generated</td></tr><tr><th>Username</th><td>Create SNMP Username to be used by snmp client</td></tr><tr><th>Auth Protocol</th><td>Select MD5 or SHA</td></tr><tr><th>Auth Passphrase</th><td>Configure authentication passphrase of eight or more characters</td></tr><tr><th>Privacy Protocol</th><td>Select between DES, AES128</td></tr><tr><th>Port</th><td>SNMP service runs on UDP port 161 by default. Specify an alternate port number to run the service on an alternate UDP port.</td></tr><tr><th>Interface</th><td><p>This is the interface on which the SNMP service will listen. This should always be set to an interface behind the firewall.</p><ul><li><p>Loopback - This will listen only on virtual management IPs. Useful for monitoring across the virtual network overlay (e.g. snmp collector is in the remote network)</p></li><li><p>ETH0 for single interface setups. Note: if enabled on a WAN interface with public IP SNMP port 161 will show as available on the internet</p></li><li><p>ETH1 for dual interface setups</p></li></ul></td></tr></tbody></table><img src=system-config.png alt=img></p><h4 id=query-the-snmp-service>Query the SNMP Service</h4><p>The SNMP Service is listening on the IP address of the Interface chosen along with the Virtual Management IP if configured. The example below is a snmpwalk from a client on the same layer 2 network that the data nic of the edge node resides in.</p><p>To query the SNMP service you can use a tool like snmpwalk or similar.</p><p>SNMPWALK Example:</p><p>snmpwalk -v3 -l authPriv -u snmpuser -a MD5 -A &ldquo;securepassword&rdquo; -x DES -X &ldquo;securepassword&rdquo; ip.ad.dre.ss</p><p>In this example:</p><p>MD5 and DES match the configured Auth and Privacy protocols. Be aware that other protocols may be selected</p><p>snmpuser matches the configured Username</p><p>securepassword after -A is the Auth Passphrase a, after -X is the Privacy Passphrase</p><p>ip.ad.dre.ss needs to be replaced with the IP address of the node that you want to target:</p><p>If you are querying from the local network, you should use the IP address of the Interface selected on the SNMP config panel</p><p>If you are querying from across the virtual network, you’d need to use the Virtual Management IP in the correct Virtual Network.</p><p>Running this command should generate output like shown on this page.</p><p>Information Provided by SNMP
A full list of all available OID&rsquo;s supported by the Trustgrid Node is listed here.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f9e99eb83460dac80a12d5d93363b352>13.1 - OIDs</h1><h4 id=snmp-standard-oids>SNMP Standard OIDs</h4><p>Trustgrid exposes data through standard OIDs to provide information about the below resources. Most monitoring software will detect these automatically.</p><ul><li><p>CPU</p></li><li><p>Memory</p></li><li><p>Disk</p></li><li><p>Network Interface</p></li></ul><h4 id=trustgrid-custom-oids>Trustgrid Custom OIDs</h4><p>The following custom data points are made available under Trustgrid’s Enterprise OID .1.3.6.1.4.1.53560 which will need to be used as the prefix for the below OIDs</p><ul><li><p><code>.2.2.1</code> - Lists VPN Stats in a table each virtual network is a row in the table (signified with the suffix .# for that networks row number) with a value for each metric</p><ul><li><p><code>.1.#</code> - Lists the interface name associated with the below Virtual network name.</p></li><li><p><code>.2.#</code> - Lists the Virtual Network names associated with this node.</p></li><li><p><code>.3.#</code> - Lists the Number of New Flows</p></li><li><p><code>.4.#</code> - Lists the Number of Active Flows</p></li><li><p><code>.5.#</code> - Lists the Inbound TCP Octets since last polling</p></li><li><p><code>.6.#</code> - Lists the Outbound TCP Octets since last polling</p></li><li><p><code>.7.#</code> - Lists the Inbound UDP Octets since last polling</p></li><li><p><code>.8.#</code> - Lists the Outbound UDP Octet since last polling</p></li><li><p><code>.9.#</code> - Lists the Inbound ICMP Octets since last polling</p></li><li><p><code>.10.#</code> - Lists the Outbound ICMP Octets since last polling</p></li></ul></li><li><p><code>.2.3.0</code> - Lists the Control Plane connectivity status. Returns UP if connected and DOWN if disconnected</p></li><li><p><code>.2.4.0</code> - Lists Data Plane connectivity status. Returns UP if connected to all gateways and DOWN if disconnected from at least one configured gateway</p></li><li><p><code>.2.5.1</code> - Table with name and value of all tags associated with the node</p></li><li><p><code>.2.6.0</code> - Integer showing the number of available data plane connections (known gateways if an edge node is queried, known edge node clients if a gateway node is queried)</p></li><li><p><code>.2.7.0</code> - Integer showing the number of active data plane connections</p></li><li><p><code>.2.8.0</code> - String showing the cluster status of the node. Possible values are PRIMARY, SECONDARY, or <code>NOT_CLUSTERED</code></p></li></ul><h4 id=example-output>Example output</h4><p>The output below shows the device has two virtual networks (mesh & LRE-NETWORK) both attached to the same physical interface (enp0s20f1). The mesh network has no activity. The LRE-NETWORK has significant TCP traffic and a large number of flows.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.1</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;enp3s0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.1</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;enp3s0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.1</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;enp3s0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;Default-Route&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;mesh&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;LRE-NETWORK&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.3</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.3</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.3</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>6562</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>-8328</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>5821341</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>132753210</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.7</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.7</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.7</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.8</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.8</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.8</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.9</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.9</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.9</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.10</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.10</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.10</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>3</span> <span style=color:#a40000>=</span> <span style=color:#a40000>Counter</span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.3</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>0</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;UP&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>0</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;UP&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.1</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;test&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.1</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;enviro&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;null&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.5</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.2</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;LRE&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>0</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>8</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.7</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>0</span> <span style=color:#a40000>=</span> <span style=color:#a40000>INTEGER:</span> <span style=color:#0000cf;font-weight:700>8</span>
</span></span><span style=display:flex><span><span style=color:#a40000>iso.</span><span style=color:#0000cf;font-weight:700>3.6</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.4</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>1.53560</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>2.8</span><span style=color:#a40000>.</span><span style=color:#0000cf;font-weight:700>0</span> <span style=color:#a40000>=</span> <span style=color:#a40000>STRING:</span> <span style=color:#4e9a06>&#34;NOT_CLUSTERED&#34;</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-4c6bb6eb8a966c5bdb819b6df3d325bb>14 - Thresholds</h1><div class="pageinfo pageinfo-primary"><p>Thresholds provide a way to trigger events when different measurements exceed a given value. Thresholds configured at the node level can override <a href=https://docs.trustgrid.io/docs/domain/thresholds/>Domain Thresholds</a>.</p></div><p>To view and configure thresholds, a user will need <code>nodes::configure::thresholds</code> permissions.</p><p>Navigate to a node, and click <code>Thresholds</code> under the <code>System</code> section.</p><p><img src=list.png alt=img></p><p>Note that overridden thresholds have a yellow square icon next to them.</p><h3 id=load-thresholds>Load Thresholds</h3><p>Load thresholds measure the health of the node itself.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The name of the threshold. This will be available in generated events.</td></tr><tr><th>Telemetry</th><td>The metric to monitor. Options are CPU usage (%), memory usage (%), disk usage (%), and embryonic flows (absolute count).</td></tr><tr><th>Threshold</th><td>The value that must be exceeded for an event to be generated.</td></tr><tr><th>Duration</th><td>The time period to measure. If the threshold is exceeded for this duration, an event will be generated.</td></tr></tbody></table><h3 id=network-thresholds>Network Thresholds</h3><p>Network thresholds measure the health of the network from the node&rsquo;s perspective.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The name of the threshold. This will be available in generated events.</td></tr><tr><th>Telemetry</th><td>The metric to monitor. Options are latency (ms), bandwidth in (Mbps), and bandwidth out (Mbps).</td></tr><tr><th>Threshold</th><td>The value that must be exceeded for an event to be generated.</td></tr><tr><th>Duration</th><td>The time period to measure. If the threshold is exceeded for this duration, an event will be generated.</td></tr><tr><th>Target</th><td>For latency, target node to measure the latency to. For bandwidth measurements, the interface to measure the bandwidth on.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-db262ef25bdb30f2917537a56c918a75>15 - Tags</h1><div class="pageinfo pageinfo-primary"><p>A tag is a name / value pair that can be used to provide additional information about a Trustgrid resource (<a href=https://docs.trustgrid.io/docs/nodes/>nodes</a>, <a href=https://docs.trustgrid.io/docs/clusters/>clusters</a>, etc).</p></div><p>Tags are useful when managing enterprise-scale deployments of <a href=https://docs.trustgrid.io/docs/nodes/>nodes</a>. Tags allow the user to identify quickly and easily a <a href=https://docs.trustgrid.io/docs/nodes/>node</a> or group of <a href=https://docs.trustgrid.io/docs/nodes/>nodes</a> with the same property. Both the name and value of the tags are set by the user. Names should provide the context and values provide the actual data. For example, to provide the address of a device you would set the name to <code>address</code>, and the value to something like <code>123 Main St</code>.</p><div class="alert alert-primary" role=alert>It is a best practice for Trustgrid customers to standardize on a set of tag names and appropriate values. This increases the consistency of use across your organization. When adding tags the existing tag names and associated values will be prepopulated as options.</div><p>Some common uses of tags are:</p><ul><li>Supporting information (production status, contact info, hours of operation, escalation)</li><li>On-premise/edge location information (site name, address, pin code)</li><li>Configuration (High availability, instance type, region, disaster recovery)</li></ul><div class="alert alert-warning" role=alert>Tag names and values are case-sensitive and should only consist of letters, numbers, dashes (<code>-</code>), and underscores (<code>_</code>).</div><h3 id=viewing-tags>Viewing Tags</h3><p>There are multiple ways to view tags.</p><h4 id=viewing-node-tags-from-the-node-detail-page>Viewing Node Tags from the Node Detail Page</h4><p>After navigating to a specific node’s detail page you can view the tag by:</p><ul><li><p>Opening the Tags panel from the left side navigation bar:</p><p><img src=node-tags-yay4.png alt=img></p></li><li><p>Opening the info panel by clicking <code>Info</code> in the top right or by clicking the ` (backtick) key</p><p><img src=info-panel-nodes2.png alt=img></p></li></ul><h3 id=modifying-tags>Modifying Tags</h3><p>To add a tag:</p><ol><li><p>Navigate to the <code>Tags</code> section of a node.</p></li><li><p>Click <code>Add Tag</code>.</p></li><li><p>A new row will appear at the bottom of the tags table. There will be a list of existing tag names for your organization. You can filter the list by typing in the field. You can either select an existing tag name, or create a new one by typing it out in full and then selecting <code>New selection: tagName</code>.</p><p><img src=new-tag-name.png alt=img></p></li><li><p>Next move to the values field. As with the name, existing values will be listed. To enter a new value type it in completely.</p></li><li><p>Click <code>Save</code></p></li></ol><p>Tag rows can be edited in-place. Change the name or value, then click <code>Save</code>.</p><p>To remove a tag, click the red X next to the tag name, then click <code>Save</code>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-5761e36c5d92eb91d4d3e7baba472df1>15.1 - Production Status Tags</h1><div class="pageinfo pageinfo-primary"><p>Production status tags are used for for organizing large Trustgrid deployments.</p></div><p>It is recommended that customers use a <a href=https://docs.trustgrid.io/docs/nodes/tags/>tag</a> to indicate if <a href=https://docs.trustgrid.io/docs/nodes/>nodes</a> are currently in production or not. For example, you may wish to have a <a href=https://docs.trustgrid.io/docs/nodes/tags/>tag</a> such as prod_status with possible values like</p><ul><li><code>deploying</code> for devices still being deployed</li><li><code>production</code> for devices actively in user</li><li><code>decommission</code> for devices that are being removed</li></ul><div class="alert alert-primary" role=alert>It’s important to have these <a href=https://docs.trustgrid.io/docs/nodes/tags/>tag</a> names and values be consistent within the organization including case. <code>Production</code> and <code>production</code> would be viewed as two different values, as an example.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-e524791e0063d6054d27793e0129ae3a>16 - Tunnels</h1><h3 id=tunnels-overview>Tunnels Overview</h3><p>Trustgrid Supports configuring various tunneling protocols in order to establish secure connectivity between any appliance that supports the underlying protocol.
The supported tunnels are listed below.</p><ul><li>IPsec - Internet Protocol Security supporting ikev1 and ikev2 tunnels</li><li>GRE - Generic Routing Encapsulation used for setting up a direct point to point network connection</li><li>Vnet - The virtual network tunnel is the Trustgrid Proprietary VPN tunneling protocol and therefore can only be used to establish connectivity to other Trustgrid nodes in the organization</li><li>Wireguard - The latest open source tunneling protocol aiming to provide better performance than the traditional ipsec or openvpn protocols</li></ul><p>&ldquo;Wireguard&rdquo; is a registered trademark of Jason A. Donenfeld</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b11c1ac5de2d23047eeaef34bbcc36e8>16.1 - GRE</h1><div class="pageinfo pageinfo-primary"><p>Trustgrid supports configuring GRE tunnels that can be used to establish connectivity to any appliance that supports the GRE protocol.
A GRE tunnel interface is created which can then be attached to an interface on a node. VRFs can then be used to control the flow of traffic and how it should appear on the network.</p></div><h2 id=configure-gre-tunnel>Configure GRE Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select GRE</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_gre.png alt=img></p><p><img src=gre.png alt=img></p><h3 id=gre-tunnel-configuration-parameters>GRE Tunnel Configuration Parameters</h3><ul><li>Name - the name of the GRE tunnel interface that will be created on the Trustgrid node</li><li>Description - optional field to used to document the purpose of the tunnel</li><li>IP - the ip address the tunnel is created with in CIDR</li><li>Peer - the remote IP address of the appliance the tunnel is being established with</li><li>VRF - existing VRF on the node the tunnel is being associated to</li><li>MTU - the MTU of the tunnel interface. Typically can be set to 1476.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-fc27731e4eecf141cc42060191de9c42>16.2 - IPSec</h1><div class="pageinfo pageinfo-primary"><p>Trustgrid supports configuring traditional IPSec tunnels that can be used to establish connectivity to any appliance that supports the IPSec protocol.
Once an IPSec tunnel is configured an IPSec virtual interface is created that can be attached to a node interface. VRFs can be used in conjunction to explicitly control what traffic is allowed (VRF ACLs) to pass and how it should look on the network (VRF NATs or Traffic Rules).</p></div><h2 id=configure-ipsec-tunnel>Configure IPSec Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select IPSEC</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_ipsec.png alt=img></p><p><img src=ipsec_config.png alt=img></p><h3 id=ipsec-tunnel-configuration-parameters>IPsec Tunnel Configuration Parameters</h3><h4 id=required-parameters>Required Parameters</h4><ul><li>Name - the name of the IPSec tunnel interface that will be created on the node and displayed in the Trustgrid Portal</li><li>Description - used to document the purpose of the tunnel</li><li>Interface - the network interface the tunnel will be listening on. Typically this will be network adapter 1 which is the WAN interface</li><li>Interface IP - the ip address the tunnel will be created to use in CIDR. Typically this would be a /30.</li><li>Interface VRF - the VRF the tunnel will be associated with in order to apply ACLs / NATs / Routes or Traffic Rules</li><li>Interface MTU - the specified MTU of the tunnel interface. Typically this can be left to the default of 1436</li><li>IKE Version - select version 1 or version 2</li><li>Peer IP - The remote ip address of the appliance the tunnel is being established with</li><li>IKE Cipher - The cipher used for phase 1</li><li>IKE DH Group - The Diffie-Hellman Group used for phase 1</li><li>IPSEC Cipher - the cipher used for phase 2</li><li>PFS - The Diffie-Hellman Group used for phase 2 perfect forward secrecy</li><li>DPD Interval - seconds for dead peer detection</li><li>DPD Retries - number of dead peer detection retries before the tunnel is re-keyed / torn down</li><li>Rekey Interval - time in seconds before a re-key of the tunnel is initiated</li><li>Replay Window - size of the replay window which is used to prevent replay attacks. Typically set between 64 and 128</li><li>Local Subnet - the local subnet in CIDR that will be considered interesting traffic and be allowed to forward over the tunnel</li><li>Remote Subnet - the remote subnet in CIDR will be considered interesting traffic and be received on the tunnel</li><li>Auto Add - the connection is added and then waits for the remote peer to initiate the tunnel establishment</li><li>Auto Start - the connection is added and then attempts to initiate the tunnel to the remote peer</li><li>PSK - the pre-shared key used by both peers to establish the tunnel</li></ul><h4 id=optional-parameters>Optional Parameters</h4><ul><li>Virtual Network - associate the tunnel to a Trustgrid Virtual Network</li><li>IKE Local ID - The IP address that will be seen by the remote peer to establish the tunnel. Typically this would be the public facing WAN IP of the Trustgrid Node.</li><li>IKE Remote ID - Used for identity validation. Typically this is the same address as the Peer IP</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-abc39047a89af94602ada4991017aa16>16.3 - VNET</h1><div class="pageinfo pageinfo-primary"><p>A virtual network tunnel interface can be configured on a Trustgrid node or cluster to allow forwarding of traffic to a remote Trustgrid Node or Cluster that is attached to the same virtual network. The tunnel interface is associated to a vrf which is used to define and control what traffic is allowed to pass and how it should appear on the network. There is no attachment of the vnet interface to a node interface required but the virtual network does need to be attached to the node or cluster before the tunnel interface is created.</p></div><h2 id=configure-vnet-tunnel>Configure Vnet Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select VNET</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_vnet.png alt=img></p><p><img src=vnet.png alt=img></p><h4 id=configuration-parameters>Configuration Parameters</h4><ul><li>Name - the name of the tunnel interface created on the Trustgrid Node or Cluster</li><li>Description - optional descriptive parameters related to the tunnel</li><li>Virtual Network - the Trustgrid virtual network the tunnel is being associated to. The virtual network should already be attached to the node or cluster to be selectable.</li><li>VRF - The vrf the tunnel is being associated to. Only vrf&rsquo;s which exist on the Trustgrid Node or Cluster can be selected</li><li>MTU - the mtu size of the tunnel interface. Typically the default of 1430 should be used</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-190881abc353f27a6db97e6bf2dab78b>16.4 - Wireguard</h1><div class="pageinfo pageinfo-primary"><p>A wireguard tunnel interface can be configured to allow a wireguard client to connect to a Trustgrid Node running as a wireguard server.
The tunnel interface is associated to a vrf which is used to define and control what traffic is allowed to pass and how it should appear on the network.</p></div><h2 id=configure-wireguard-tunnel>Configure Wireguard Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select Wireguard</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_wireguard.png alt=img></p><p><img src=wireguard.png alt=img></p><h4 id=wireguard-configuration-parameters>Wireguard Configuration Parameters</h4><ul><li>Name - the name of the wireguard tunnel interface created on the Trustgrid node or cluster</li><li>Description - optional field used to document what clients are utilizing the tunnel</li><li>Interface IP - the ip address in CIDR the wireguard tunnel interface will be created as</li><li>Public Key - the public key of the remote wireguard client</li><li>Pre-Shared Key - optional 256 bit to provide an additonal level of security</li><li>VRF - the vrf that exists on the Trustgrid node or cluster the tunnel interface is associated to</li><li>MTU - the MTU of the wireguard tunnel interface. Typically this can be left at 1430</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a7d8b07ab0f225311892826abc807d5b>17 - Virtual Machines</h1><p>Trustgrid nodes can deploy virtual machines (if supported) using the open source virtualization technology <code>Kernel-base Virtual Machine (KVM)</code>which allows the node to act as a hypervisor to run multiple, isolated virtual guests.</p><p>The virtual machine can be attached to both the local and virtual network space which allows both local and remote resources to communicate with the virtual machine. For example an API could be deployed on a Trustgrid Gateway which sends API calls via the virtual network space to a virtual machine running on a Trustgrid Edge Node. The API call could then be translated to make a call to a database running on the local network and passed back up to the gateway host.</p><div class="alert alert-info" role=alert>Before being able to deploy a virtual machine to a node, an <a href=https://docs.trustgrid.io/docs/nodes/kvm/images/>image</a> needs to be created.</div><h2 id=management>Management</h2><p>Navigate to <code>VM Management</code> > <code>Virtual Machines</code> on a node.</p><p><img src=vm_manage.png alt=img></p><p><img src=vm_add.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>Name of the virtual machine.</td></tr><tr><th>Description</th><td>Description for the virtual machine.</td></tr><tr><th>Image</th><td>Image selected from the ones available.</td></tr><tr><th>Firmware</th><td><p>Boot firmware for the virtual machine.</p><ol><li>BIOS</li><li>UEFI</li></ol></td></tr><tr><th>Device Bus</th><td><p>Device Bus used for deployment of the virtual machine.</p><ol><li>VirtIO</li><li>IDE</li><li>SATA</li></ol></td></tr></tbody></table><h2 id=overview>Overview</h2><p>Navigating into a virtual machine, the overview section allows editing basic information about the virtual machine&rsquo;s execution environment.</p><p><img src=vm_overview.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>Name of the virtual machine.</td></tr><tr><th>Description</th><td>Description for the virtual machine.</td></tr><tr><th>Image</th><td>Image selected from the ones available.</td></tr><tr><th>Guest OS (read-only)</th><td>Operating System of the Image.</td></tr><tr><th>Hostname (Optional)</th><td>Hostname given to the virtual machine on deploy.</td></tr><tr><th>Stop Timeout (Optional)</th><td>Denotes how long to wait for the virtual machine to gracefully stop before killing the process. Default is 2 minutes.</td></tr><tr><th>Firmware (read-only)</th><td>Boot firmware of the virtual machine.</td></tr><tr><th>Device Bus (read-only)</th><td>Device Bus used for deployment of the virtual machine.</td></tr><tr><th>Auto Start (Optional)</th><td>Indicates the virtual machine should automatically start after deploy.</td></tr></tbody></table><h2 id=cpu>CPU</h2><p>Virtual machine CPU allocation.</p><p><img src=vm_cpu.png alt=img></p><h2 id=memory>Memory</h2><p>Virtual machine Memory allocation in GB, MB, KB, or Bytes.</p><p><img src=vm_mem.png alt=img></p><h2 id=network>Network</h2><p>The networking section allows you to configure the virtual machine&rsquo;s VRF, its port mappings, and its virtual networks and interfaces.</p><p><img src=vm_net.png alt=img></p><h3 id=host-port-mappings>Host Port Mappings</h3><p>Host port mappings allow you to expose a port on the host to the virtual machine. This is useful for exposing a service running in the container to the local network.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Protocol</th><td>The protocol to listen for. If not specified, all traffic is forwarded to the virtual machine.</td></tr><tr><th>Host Interface</th><td>The host interface to listen on.</td></tr><tr><th>Host Port</th><td>The host port to listen on.</td></tr><tr><th>Virtual Machine Port</th><td>The virtual machine port that will receive the mapped traffic.</td></tr></tbody></table><h3 id=virtual-networks>Virtual Networks</h3><p>Attaching a virtual network to a virtual machine allows virtual network traffic to reach it.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Virtual Network</th><td>The virtual network to attach.</td></tr><tr><th>Virtual IP</th><td>The virtual IP to assign to the virtual machine.</td></tr><tr><th>Allow Outbound</th><td>Whether the virtual machine should be allowed to make outbound connections into the virtual network.</td></tr></tbody></table><h3 id=virtual-interfaces>Virtual Interfaces</h3><p>A virtual interface can be mapped to a virtual machine to forward all traffic.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The virtual interface name.</td></tr><tr><th>Destination</th><td>The interface destination inside the virtual machine.</td></tr></tbody></table><h2 id=volumes>Volumes</h2><p>Allows mapping disks or cd-roms to a virtual machine.</p><p><img src=vm_vols.png alt=img></p><h2 id=snapshots>Snapshots</h2><p>Allows the creation, restoration, and deletion of virtual machine snapshots.</p><p><img src=vm_snapshots.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The snapshot name.</td></tr><tr><th>Creation Time</th><td>The timestamp when the snapshot was created.</td></tr><tr><th>VM State</th><td>The state of the virtual machine when the snapshot was created.</td></tr><tr><th>Snapshot Mode</th><td><ol><li>Extenal Disk Only - Mode applied to the snapshot when the firmware of the virtual machine is UEFI.</li><li>Internal - Mode applied to the snapshot when the firmware of the virtual machine is BIOS. This mode includes the guest virtual machine state.</li></ol></td></tr><tr><th>Parent Snapshot</th><td>If this is a child snapshot, this references the parent snapshot.</td></tr><tr><th>Description</th><td>The snapshot description.</td></tr></tbody></table><p>Every snapshot operation is tracked asynchronously. You can keep track of the status of every snapshot creation, restoration, and deletion via the <code>Recent Tasks</code> table.</p><p><img src=vm_snapshots_tasks.png alt=img></p><h2 id=cloud-init>Cloud Init</h2><p>Cloud-init is a simple and powerful way to configure virtual machines during deployment. You can manage user creation, install updates, configure network, etc.</p><div class="alert alert-info" role=alert>You can find the full cloud-init documentation <strong><a href=https://cloudinit.readthedocs.io/en/latest>here</a></strong></div><p><img src=vm_cloud_init.png alt=img></p><hr><h2 id=history>History</h2><p>Shows active and completed traffic flows for the virtual machine.</p><div class="alert alert-info" role=alert>Active flows can be manually terminated.</div><p><img src=vm_history_flows.png alt=img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-943f246638aa3e393a8f6d60aece36bf>17.1 - Images</h1><p>The images section allows a user to add/delete virtual machine images.</p><p><img src=vm_images.png alt=img></p><div class="alert alert-info" role=alert>The <code>Downloaded</code> column shows whether or not an image is present on the node.</div><p><img src=vm_add_image.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Display Name</th><td>Friendly name associated to the image.</td></tr><tr><th>Description</th><td>Description for the image.</td></tr><tr><th>Image File</th><td>Image file selected from the node data store.</td></tr><tr><th>Operating System</th><td>Operating System for the image. This is rather important to optimize the virtual machine configuration.</td></tr></tbody></table><div class="alert alert-info" role=alert>If an incorrect <code>Operating System</code> is selected for the image, the virtual machine might not be able to detect install media or perform critical device controller operations</div><h4 id=delete-image>Delete Image</h4><p>If the image is present on the node, executing a delete of the image will prompt the deletion of the image from the node.</p><p><img src=vm_image_delete_confirm.png alt=img></p><ol><li>Yes - The image will be attempted to be deleted from the node first before the image entry is removed.</li><li>No - The image will not be deleted from the node and the image entry will be removed.</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-67bfa9c81db7a9fa409661e2d045f475>17.2 - Volumes</h1><p>Volumes are used to allocate disks or to attach CD-ROMs to virtual machines.</p><p><img src=vm_volumes.png alt=img></p><p><img src=vm_add_volume.png alt=img></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>Name for the volume.</td></tr><tr><th>Device Type</th><td><p>Virtual machine type.</p><ol><li>Disk</li><li>CD-ROM</li></ol></td></tr><tr><th>Device Bus</th><td><p>Bus for the device.</p><ol><li>IDE</li><li>VirtIO</li><li>SCSI</li><li>SATA</li></ol></td></tr><tr><th>Size (Only for Disk)</th><td>Size in GB, MB, KB, or Bytes for the disk.</td></tr><tr><th>Disk Provisioning (Only for Disk)</th><td><p>Allocation method used for provisioning a disk.</p><ol><li>Thin Provision - Disk starts small and expands as more disk space is required up to the size specified. Use this format to save storage space.</li><li>Thick Provision Lazy Zeroed - Space required for the virtual disk is allocated when the virtual disk is created. Data that remains on the physical device is not erased during creation, but is zeroed out on demand at a later time on first write from the virtual machine.</li><li>Thick Provision Eager Zeroed - Space required for the virtual disk is allocated at creation time. The data remaining on the physical device is zeroed out when the virtual disk is created. It might take much longer to create disks in this format than to create other types of disks.</li></ol></td></tr><tr><th>Encrypted (Only for Disk)</th><td>True if disk should be encrypted, false otherwise.</td></tr><tr><th>ISO File (Only for CD-ROM)</th><td>ISO file selected from the node data store.</td></tr></tbody></table><div class="alert alert-info" role=alert>Windows virtual machines do not support thin provisioned disks.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-1112cde592bd4c482ee61f51bcf95e86>18 - VPN</h1><div class="pageinfo pageinfo-primary"><p>Trustgrid nodes can be configured to provide VPN-like functionality, allowing network address translation (NAT) and routing between nodes.</p></div><p>The VPN feature enables routing of IP packets by utilizing a virtual IP space that is configured on the nodes. In this configuration, the node can be used as the next hop for route destined for the virtual IP space, or the node can be used as the default gateway for a network. The virtual IP space is used as a transit network with NAT being utilized to translate IP addresses on to/from the virtual IP space on either side. It is also possible to preserve the original source and destination by having the virtual IP space be identical to the LAN network.</p><p>The Trustgrid VPN feature provides the capability to securely route IP packets between remote networks. In this configuration, Trustgrid nodes can operate as a distributed mesh virtual private network (VPN) that can allow applications to access remote data and services at layer 3 (L3) of the network OSI model. This is done by defining a virtual L3 network (similar to an Amazon VPC) and then selecting how local node networks are exposed and translated into the the virtual address space.</p><h2 id=attaching-a-network>Attaching a Network</h2><p>To use VPN functionality, a node or cluster must be attached to a domain <a href=https://docs.trustgrid.io/docs/domain/virtual-networks/>virtual network</a>.</p><p>Navigate to the <code>VPN</code> section for your node or cluster, and select <code>Actions</code>-><code>Attach</code>.</p><p><img src=attach-network.png alt=img></p><tr><th>Network</th><td>The network name (defined on the domain) to attach</td></tr><tr><th>Network CIDR</th><td>The network CIDR</td></tr><tr><th>Validation CIDR</th><td>The network route CIDR</td></tr><tr><th>Virtual Management IP</th><td>The virtual IP address to use in this network</td></tr><p>Once attached, navigate into the network to manage the VPN configuration.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-900c3294b54df2ae1f523685155ffe0b>18.1 - DNS</h1><p>Nodes can act as DNS servers for the virtual network. Find DNS definitions and change them under the <code>DNS</code> section of the VPN configuration.</p><p><img src=list.png alt=img></p><h2 id=upstream-servers>Upstream Servers</h2><p>Upstream servers will be used to answer DNS queries for domains that are not in the virtual network.</p><p><tr><th>Host IP Address</th><td>The upstream DNS server&rsquo;s IP address</td></tr><tr><th>Host Port</th><td>The upstream DNS server&rsquo;s port (usually 53)</td></tr></p></div><div class=td-content style=page-break-before:always><h1 id=pg-08853da200adfe5357ff18d4b5e6158c>18.2 - Dynamic Routing</h1><p>Dynamic routing allows a node to export and import routes from other nodes in the virtual network. Find dynamic route definitions and change them under the <code>Dynamic Routing</code> section of the VPN configuration.</p><p><img src=list.png alt=img></p><h2 id=exports>Exports</h2><p>Export routes for other nodes in the virtual network to import.</p><p><img src=add-export.png alt=img></p><p><tr><th>Destination</th><td>The node to route traffic to.</td></tr><tr><th>Destination CIDR</th><td>The network to route traffic to.</td></tr><tr><th>Metric</th><td>The route metric. Lower metrics are processed first.</td></tr><tr><th>Gateway Path</th><td>An optional gateway path to use for the route.</td></tr></p><h2 id=imports>Imports</h2><p>Import routes from other nodes in the virtual network.</p><p><img src=add-import.png alt=img></p><p><tr><th>Destination</th><td>The node to route traffic to.</td></tr><tr><th>Destination CIDR</th><td>The network to route traffic to.</td></tr><tr><th>Metric</th><td>The route metric. Lower metrics are processed first.</td></tr><tr><th>Gateway Path</th><td>An optional gateway path to use for the route.</td></tr></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c181d836618306bbfdddca7c43ba4103>18.3 - NATs</h1><div class="pageinfo pageinfo-primary"><p>NATs allow Trustgrid to alter the source and/or destination IP address of layer 3 traffic as it enters or leaves the VPN.</p></div><h2 id=adding-an-interface>Adding an Interface</h2><p>NATs are scoped to an interface. Add an interface from the <code>Actions</code> menu.</p><p><img src=add-interface.png alt=img></p><h2 id=inside-nats>Inside NATs</h2><p>An inside NAT defines how a local device IP address translates into a virtual network address. For instance, a local device may have a local IP address of 192.168.1.100, but you may want it to appear to other devices or applications on the virtual network as IP address 10.0.20.100. Or you may want an entire block of local IP addresses to show up on the virtual network as a different block. You can do this translation via Inside NATs. Inside NAT&rsquo;s also control what local devices can participate on the virtual network. If a local device does not have an inside NAT configured that includes its IP address, it can&rsquo;t access or be accessed by other devices on the network. Inside NATs require the following information:</p><tr><th>Local CIDR</th><td>The local IP address or address block that should be mapped into the virtual network. It should be entered in CIDR block format (eg - <code>192.168.100.0/24</code> or <code>192.168.100.51/32</code>).</td></tr><tr><th>Virtual CIDR</th><td>The network IP address or addresses that the local IP addresses should be mapped to, also entered in CIDR block format.</td></tr><div class="alert alert-primary" role=alert>Network addresses map 1x1 with local addresses, so the prefix length (the /xx number of the CIDR) should be the same in both the local and network CIDR blocks of the inside NAT entry.</div><h2 id=outside-nats>Outside NATs</h2><p>By default, when a device on the local network of a node receives traffic from a remote device on the network, the remote device IP address will be the IP address that was entered in the local CIDR block for the remote node&rsquo;s inside NAT entry for the remote device. For instance, if the remote device was mapped to network address 10.0.100.1, then its traffic on the local network will appear to come from IP address 10.0.100.1. However due to the local network configuration, there may be some situations where it is desirable to translate remote network addresses before egressing onto the local network. For instance on a local network of 192.168.0.0/16, a user may want the remote devices virtual network IP of 10.0.100.1 to be translated to 192.168.50.5 so that it fits better into the local network setup. This kind of translation can be achieved by adding outside nats. To add an outside NAT you must enter the following information:</p><tr><th>Network Group</th><td>The network IP address or addresses that should be translated before egressing onto the local network. This should be entered in CIDR block format.</td></tr><tr><th>Local CIDR</th><td>The local IP address or addresses that the network addresses should be mapped to, also entered in CIDR format.</td></tr><div class="alert alert-primary" role=alert>An outside NAT is required for all nodes and clusters using the virtual network</div><p>Note there are situations where it may be desirable to make multiple remote devices masquerade as one local IP address though the use of port address translation (PAT). This can be achieved by defining an outside nat in which the network CIDR contains a larger address space than the local CIDR. For instance, an entry with network CIDR 10.0.1.0/24 and local CIDR 192.168.100.10 would make all remote devices with network IP addresses in 10.0.1.0/24 appear as IP address 192.168.100.10 on the local network.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-97c2667991f3a82dffa39a3c14315bd7>18.4 - Port Forwarding</h1><p>Port forwarding allows a node to expose an <a href=https://docs.trustgrid.io/docs/nodes/services/>L4 service</a> on the virtual network.</p><p><img src=list.png alt=img></p><p><tr><th>Virtual IP Address</th><td>The IP to expose the service on the virtual network.</td></tr><tr><th>Virtual Port</th><td>The port to expose the service on the virtual network.</td></tr><tr><th>Local Service</th><td>The service to expose.</td></tr></p></div><div class=td-content style=page-break-before:always><h1 id=pg-dfaf2586eec001c16d7973b3af3fc2aa>18.5 - Static Routing</h1><p>Static routing allows a node to route traffic to a remote network. Find static route definitions and change them under the <code>Static Routing</code> section of the VPN configuration.</p><p><img src=add-modal.png alt=img></p><p><tr><th>Destination</th><td>The node to route traffic to.</td></tr><tr><th>Destination CIDR</th><td>The network to route traffic to.</td></tr><tr><th>Metric</th><td>The route metric. Lower metrics are processed first.</td></tr><tr><th>Gateway Path</th><td>An optional gateway path to use for the route.</td></tr></p></div><div class=td-content style=page-break-before:always><h1 id=pg-20ab08d0a7033f3ac55b1a0c701ebc91>18.6 - WireGuard ®</h1><p>Nodes may enable a WireGuard server to expose the virtual network to WireGuard clients.</p><h2 id=configuration>Configuration</h2><p><img src=wireguard.png alt=img></p><p><tr><th>Enabled</th><td>When enabled, this node will accept WireGuard client connections</td></tr><tr><th>Port</th><td>The port clients should connect to</td></tr><tr><th>Remote Traffic Forwarding</th><td>Whether the node should forward traffic to the virtual network</td></tr></p><h2 id=key-management>Key Management</h2><p>Clients will need the server&rsquo;s public key to connect. This can be generated (using the <code>Regenerate</code> action) or can be derived from the private key (imported using the <code>Import</code> action).</p><div class="alert alert-primary" role=alert>Changing the server&rsquo;s private key will disconnect existing clients and require their reconfiguration.</div><h2 id=clients>Clients</h2><p>Clients must be added before they can connect.</p><p><img src=wg-client.png alt=img></p><p>Each client will need to generate their own private and public key. Most WireGuard clients provide tools to do this.</p><p><tr><th>Name</th><td>The name of the client</td></tr><tr><th>Pre-shared Key</th><td>(Optional) The client&rsquo;s pre-shared key</td></tr><tr><th>Public Key</th><td>The client&rsquo;s public key</td></tr><tr><th>Allow Internet</th><td>Whether this client should be allowed to access the public network through this server</td></tr></p><p>An inside NAT should be created to map the client&rsquo;s local IP to an IP on the virtual network. The virtual network CIDR should not be a part of any existing routes in the domain. The IP should be included in an outside NAT network group, so that an ACL can allow the traffic.</p><p>An outside NAT should be created that includes the virtual network used on the gateway side.</p><p><em>&ldquo;WireGuard&rdquo; is a registered trademark of Jason A. Donenfeld.</em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-306998c1febf46a2910b5bfdf20d10b3>19 - VRFs</h1><h3 id=overview>Overview</h3><p>VRFs can be used route / nat and filter what traffic is allowed to pass and how it should appear on the network. VRFs can be associated to an interface whether it be a physical interface / virtual network interface or other tunnel interfaces such as ipsec or gre. VRFs are segmented on a layer 3 level from all other traffic traversing the Trustgrid node.</p><p>For standard use cases of source nat and/or destination nat creating a route and a NAT is sufficient. Traffic rules can be used for more advanced controls. An applicable ACL is required for any traffic to pass as a zero trust methodology is applied.</p><h3 id=address-translation>Address Translation</h3><p>This is where NATs are created in order to translate the traffic to appear as desired on the network.
NATs support translating both source and destination CIDRs as well as masquerading as the egress interface address.</p><h6 id=snat--dnat-example>SNAT / DNAT Example</h6><p>Using the example NAT below if a source packet was initiated from 10.10.10.100 destined for 10.10.20.100 the source address would be translated to 192.168.10.100 and the destination address would be translated to 192.168.20.100.
It is important to note that nat translations occur before routing decisions are made.</p><p><img src=nat1.png alt=img></p><h6 id=maquerade-example>Maquerade Example</h6><p>Using the example below if a source packet is initiated from within 10.10.10.0/24 destined for anything in 192.168.10.0/24 the source would be translated to the interface address the packet is egressing on. If it was a single interface Trustgrid node it would be sourced as the wan facing interface address.</p><p><img src=masquerade1.png alt=img></p><h3 id=routes>Routes</h3><p>Note that NAT translations happen before routing so routes should be created for the destination NAT CIDR if applicable.
Routes require a destination CIDR, interface and metric.
A next hop is optional and only applicable for non-tunnel interfaces such as physical interfaces or vlan subinterfaces.
The gateway of the applicable interface will be used if no next hop is defined.</p><p>The example below would be used for example to offload all internet bound traffic directly out the WAN facing interface</p><p><img src=offload.png alt=img></p><h3 id=traffic-rules>Traffic Rules</h3><p>Traffic rules can be used for more advanced granular traffic manipulation beyond standard source and destination nat.
There are many more parameters that can be applied to the traffic depending on the specific use case.
When creating a traffic rule an ACL is required for traffic to pass. The available parameters are defined below.
Rules are evaluated based on the line number. The first matching rule is the one that will be applied to the packet.
More specific rules should always be implemented above less specific rules. Eg a rule for a /24 network should be above a /16 network the /24 is included in.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Number</th><td>The line number the rule is applied to. Rules are matched in numerical order.</td></tr><tr><th>Action</th><td><p>All traffic rules have an action that is applied to the associated packet.</p><ul><li>Accept - The packet is allowed to be processed locally.</li><li>Drop - The packet is dropped and not responded to</li><li>Reject - A TCP Reset is sent in response</li><li>Forward - The packet is forwarded to its defined destination such as an interface or another VRF</li><li>Mirror - Packets are not manipulated but can be mirrored for inspection purposes.
For example passing through an IDS container such as Snort.</li><li>Log - The packet is not manipulated but is marked for logging</li></ul></td></tr><tr><th>Ingress Interface</th><td>The traffic rule is applied to packets that ingress on this interface</td></tr><tr><th>Forward Interface</th><td>Packets are forwarded out this interface once the rule is applied</td></tr><tr><th>Protcol</th><td>The protocol that the rule should apply to. All, ICMP, TCP or UDP</td></tr><tr><th>Forward VRF</th><td>Packets are forwarded into another VRF that is associated on the node. Only configureable when a forward action is selected.</td></tr><tr><th>Source CIDR</th><td>The source network the rule should apply to</td></tr><tr><th>Destination CIDR</th><td>The destination network the rule should apply to</td></tr><tr><th>Masquerade</th><td>Translate and source all packets from the nodes interface address when enabled</td></tr><tr><th>DNAT Destination</th><td>Forward all traffic to the DNAT destination IP/Port. For example in order to forward all http traffic through a proxy</td></tr><tr><th>Destination Mac</th><td>The destination mac address defined overwrites the source mac address of the packet. Necessary only for some container deployments such as Snort inpsecting traffic.</td></tr><tr><th>Ports</th><td>Used to define a port range when creating a traffic rule</td></tr></tbody></table><h6 id=traffic-rule-example>Traffic Rule Example</h6><p>In the below example the first rule on line number 1 is forwarding all traffic destined to 10.0.20.0/24 to a virtual network tunnel interface. Any NATs configured under Address Translation will be applied before the packet is forwarded to its destination. The rule on line number 10 will forward all traffic that does not match the first rule out to the internet masquerading as the WAN interfaces address.
If the line numbers were reversed the virtual network rule would never be matched as all traffic would match the internet offload rule which is configured for all source and destination traffic.</p><p><img src=trafficrule1.png alt=img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-33917e1b3920bc4b4a41eb8fa67d6c27>20 - ZTNA Gateway</h1><div class=lead>Configure a node to allow end-user connectivity for ZTNA applications</div><p>Navigate to a node, then select <code>ZTNA Gateway</code> under the <code>Network</code> section.</p><p><img src=ztna-gateway.png alt=ztna-gateway></p><h2 id=https-endpoint>HTTPS Endpoint</h2><p>The HTTPS endpoint is used to provide connectivity for non-WireGuard ZTNA <a href=https://docs.trustgrid.io/docs/applications/>applications</a>.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Enabled</th><td>When enabled, this node will listen for ZTNA traffic.</td></tr><tr><th>Public FQDN</th><td>The IP or FQDN of the node or the load balancer in front of the node. If using a domain name without a load balancer, be sure to select the appropriate <a href=https://docs.trustgrid.io/docs/certificates/>certificate</a>.</td></tr><tr><th>Port</th><td>The port to listen on. Users will always connect on port 443, so only change this if the node is behind a load balancer.</td></tr><tr><th>Certificate</th><td>The certificate to use for TLS traffic. Only needed if the node is to be directly accessed by users (i.e., without a load balancer) and the FQDN is a domain name.</td></tr></tbody></table><h2 id=wireguard-endpoint>WireGuard Endpoint</h2><p>The WireGuard endpoint is used to provide connectivity for WireGuard ZTNA <a href=https://docs.trustgrid.io/docs/applications/>applications</a>.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Enabled</th><td>When enabled, this node will listen for WireGuard traffic.</td></tr><tr><th>Public FQDN</th><td>The IP or FQDN of the node or the load balancer in front of the node.</td></tr><tr><th>Port</th><td>The port to listen on.</td></tr><tr><th>Public Key</th><td>The node&rsquo;s WireGuard public key. This can be generated or imported using the actions dropdown. Note that regenerated the key will disconnect existing clients and require users to reconfigure their WireGuard connection.</td></tr></tbody></table><p><em>“WireGuard” is a registered trademark of Jason A. Donenfeld.</em></p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/trustgrid/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/trustgrid aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Trustgrid All Rights Reserved</small>
<small class=ml-1><a href=https://trustgrid.io target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=/js/main.min.f1a20e761a85478d0ce3298a01e295324be8858ef8f2d2baac6737980799b320.js integrity="sha256-8aIOdhqFR40M4ymKAeKVMkvohY748tK6rGc3mAeZsyA=" crossorigin=anonymous></script>
<script src=/js/prism.js></script>
<script src=/js/tabpane-persist.js></script></body></html>