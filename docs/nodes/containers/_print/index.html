<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://trustgrid.github.io/docs/docs/nodes/containers/><link rel=alternate type=application/rss+xml href=https://trustgrid.github.io/docs/docs/nodes/containers/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/docs/favicons/favicon.ico><link rel=apple-touch-icon href=/docs/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/docs/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/docs/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/docs/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/docs/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/docs/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/docs/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/docs/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/docs/favicons/android-192x192.png sizes=192x192><title>Containers |</title><meta name=description content="Trustgrid Network Device and API documentation"><meta property="og:title" content="Containers"><meta property="og:description" content="Trustgrid Network Device and API documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://trustgrid.github.io/docs/docs/nodes/containers/"><meta itemprop=name content="Containers"><meta itemprop=description content="Trustgrid Network Device and API documentation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Containers"><meta name=twitter:description content="Trustgrid Network Device and API documentation"><link rel=preload href=/docs/scss/main.min.cd8ef62840094746f6b6a72f022aa002a82f35bfec4c2eff8212bf451c91cd1b.css as=style><link href=/docs/scss/main.min.cd8ef62840094746f6b6a72f022aa002a82f35bfec4c2eff8212bf451c91cd1b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/docs/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99793053-3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-99793053-3")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/docs/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469 106"><defs><style>.cls-1{fill:#6b6b6b}.cls-2{fill:#226ce0}</style></defs><title>Trustgrid-Logo-Grey</title><path class="cls-1" d="M.35 28.58H29.26V-.33H.35zM7.13 6.45H22.47V21.8H7.13z"/><path class="cls-1" d="M67.82-.33H38.9V28.58H67.82zM61 21.8H45.68V6.45H61z"/><path class="cls-1" d="M.35 67.13H29.26V38.22H.35zM7.13 45H22.47V60.35H7.13z"/><path class="cls-1" d="M106.36 38.22H77.45v12.3H67.82V41.27L85.26 23.83l-3.06-3L64.76 38.22H38.9V67.13H67.82V54.83h9.63v12.3h12.3V80.39h4.31V67.13h12.3zM61 60.35H45.68V45H61zm38.55.0H84.23V45H99.58z"/><path class="cls-1" d="M.35 105.69H29.26V76.77H.35zM7.13 83.55H22.47V98.9H7.13z"/><path class="cls-1" d="M38.9 105.69H67.82V76.77H38.9zm6.78-22.14H61V98.9H45.68z"/><path class="cls-2" d="M153.94 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22H140V38.78h13.2v5.78H140V67q0 3.59 1.31 5.13a4.8 4.8.0 003.91 1.55 13.59 13.59.0 006.67-2z"/><path class="cls-2" d="M176.74 39.56A18 18 0 01186 37.07V44.4q-6.58-.24-10.66 3.42a14.51 14.51.0 00-4.64 9.85V80.39h-7.57V37.32h7.57V46.6a15.52 15.52.0 016-7"/><path class="cls-2" d="M232.34 37.32V80.39h-7.65V71.27q-4.23 9.2-16 9.36-7.48.0-11.72-4.44t-4.24-12.25V37.32h7.66V61.9q0 5.46 3 8.51a10.87 10.87.0 008.18 3.06 12.11 12.11.0 009.57-4.28 16 16 0 003.54-10.7V37.32z"/><path class="cls-2" d="M260.47 44.24a21.21 21.21.0 00-6.15-1 10.48 10.48.0 00-5.49 1.26 4.21 4.21.0 00-2.08 3.87 4.3 4.3.0 002.32 4 34.68 34.68.0 007 2.73 54.86 54.86.0 017.33 2.6 13 13 0 014.85 3.83 10.51 10.51.0 012 6.67 10.58 10.58.0 01-4.6 9.29 19.65 19.65.0 01-11.44 3.17 28.35 28.35.0 01-9.32-1.55 21.07 21.07.0 01-7.61-4.39l2.85-5.54a20.07 20.07.0 006.63 3.91 22 22 0 007.69 1.47 11.45 11.45.0 006-1.39 4.61 4.61.0 002.28-4.23 4.82 4.82.0 00-2.4-4.4 32.85 32.85.0 00-7.29-2.93 48.4 48.4.0 01-7-2.48 12.43 12.43.0 01-4.64-3.71A10 10 0 01239.5 49q0-6 4.4-9a19.07 19.07.0 0111-3 27.13 27.13.0 017.69 1.1 23 23 0 016.56 3l-2.77 5.78a26 26 0 00-5.9-2.6"/><path class="cls-2" d="M303.42 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22h7.65V38.78h13.19v5.78H289.49V67c0 2.39.44 4.1 1.3 5.13a4.81 4.81.0 003.91 1.55 13.62 13.62.0 006.68-2z"/><path class="cls-1" d="M352.92 36.34V76.48a19.18 19.18.0 01-3 10.71 19.61 19.61.0 01-8.43 7.08A29.79 29.79.0 01329 96.75a36.74 36.74.0 01-10.66-1.54 34 34 0 01-9-4.16l5.05-10a25.68 25.68.0 006.51 3.17 22.5 22.5.0 007.08 1.14 12.11 12.11.0 007.74-2.27 7.52 7.52.0 002.85-6.2V72.16Q334.12 77.95 326 78a17.69 17.69.0 01-16.41-10.14 24.71 24.71.0 01-2.4-11.12 24.42 24.42.0 012.32-10.91A17.35 17.35.0 01316 38.46a17.92 17.92.0 019.61-2.61A17.42 17.42.0 01333 37.36a14.36 14.36.0 015.5 4.35V36.34zM336.07 64.51a11 11 0 002.44-7.41 11.16 11.16.0 00-2.44-7.49 8.69 8.69.0 00-12.91.0 11 11 0 00-2.48 7.45 10.85 10.85.0 002.48 7.41 8.18 8.18.0 006.47 2.85 8.08 8.08.0 006.44-2.85"/><path class="cls-1" d="M383.9 37.8a16.63 16.63.0 018.26-2V49c-.49.0-1.22-.08-2.2-.08a13.4 13.4.0 00-8.3 2.4A9.18 9.18.0 00378 57.92V80.39H363.5v-44H378v7.33a16 16 0 015.9-5.87"/><path class="cls-1" d="M411.09 18.22a7.55 7.55.0 012.16 5.58 7.59 7.59.0 01-2.16 5.54 8 8 0 01-11 0 7.59 7.59.0 01-2.16-5.54 7.55 7.55.0 012.16-5.58 8.1 8.1.0 0111 0M398.51 36.34h14.41V80.39H398.51z"/><path class="cls-1" d="M468.45 20V80.39H454v-5.7a14.92 14.92.0 01-5.58 4.68A16.94 16.94.0 01440.93 81a20.15 20.15.0 01-10.75-2.85 19.16 19.16.0 01-7.2-8 26.51 26.51.0 01-2.57-11.93 25.77 25.77.0 012.53-11.72A18.6 18.6.0 01430 38.62a20.05 20.05.0 0110.59-2.77 17.24 17.24.0 017.61 1.63A16.19 16.19.0 01454 42.12V20zm-17.1 46.5A11.77 11.77.0 00454 58.57a11.76 11.76.0 00-2.61-8 8.58 8.58.0 00-6.84-3 8.67 8.67.0 00-6.88 3.05A11.69 11.69.0 00435 58.57a11.68 11.68.0 002.64 7.93 8.68 8.68.0 006.88 3.06 8.53 8.53.0 006.84-3.06"/><path class="cls-2" d="M99.58 21.8H84.23V6.46H99.58zM106.36-.33H77.45V28.59h28.91z"/><path class="cls-2" d="M99.58 98.9H84.23V83.55H99.58zm6.78-22.13H77.45v28.92h28.91z"/></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/getting-started/><span>Getting Started</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/tutorials/><span>Guides</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/help-center/><span>Help Center</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/release-notes/><span>Release Notes</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/docs/offline-search-index.cfcdeda00b6f223961ed7535b109f3ad.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/docs/nodes/containers/>Return to the regular view of this page</a>.</p></div><h1 class=title>Containers</h1><ul><li>1: <a href=#pg-5ccaebd2e7402426ca232ab21fd17b0d>Images</a></li><li>2: <a href=#pg-c0435eb8982792b817dbfaa0c19e05a4>Volumes</a></li></ul><div class=content><p>Trustgrid nodes support running Docker containers which allows for ease of deployment across an organization. Any Docker container is supported with the exception of containers that require root level access.</p><p>The container can be attached to both the local and virtual network space which allows both local and remote resources to communicate with the container. For example an API could be deployed on a Trustgrid Gateway which sends API Calls via the virtual network space to a container running on a Trustgrid Edge Node. The API call could then be translated to make a call to a database running on the local network and passed back up to the gateway host.</p><p>Before adding a container to a node, push an image to your <a href=https://trustgrid.github.io/docs/docs/repositories/>repository</a>.</p><p>Reading and managing containers requires <code>node-exec::read</code> and <code>node-exec::modify</code> permissions, respectively. Executing a container requires <code>node-exec::compute</code> permission.</p><h2 id=management>Management</h2><p>Navigate to <code>Container Management</code> under <code>Compute</code> on a node or cluster.</p><p><img src=containers-list.png alt="Containers List View"></p><p>Here you can add, enable, disable, delete, and import a container.</p><p><img src=add-container.png alt="Add Container Modal"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The name of the container.</td></tr><tr><th>Execution Type</th><td><p>A container can be deployed as one of three types.</p><ol><li><p><strong>Service</strong> - the container is created and will run as a daemon. If the node reboots, the container will start up automatically.</p></li><li><p><strong>Recurring</strong> - the container will run on a defined schedule. A schedule parameter is defined for the frequency, either as a rate or a <a href=https://crontab.guru/examples.html>cron expression</a>.</p><table><thead><tr><th>Rate</th><th>Description</th></tr></thead><tbody><tr><td><code>rate(30 minutes)</code></td><td>Run every 30 minutes</td></tr><tr><td><code>rate(1 hour)</code></td><td>Run every hour</td></tr><tr><td><code>rate(1 day)</code></td><td>Run every day</td></tr></tbody></table></li><li><p><strong>On Demand</strong> - typically used for testing. The container is executed for a single session, but will not restart on its own.</p></li></ol></td></tr><tr><th>Status</th><td>Only enabled containers will run.</td></tr><tr><th>Image Name</th><td>The name of the image to execute.</td></tr><tr><th>Image Tag</th><td>The image tag to execute.</td></tr></tbody></table><h2 id=overview>Overview</h2><p>Navigating into a container, the overview section allows editing basic information about the container&rsquo;s execution environment.</p><p><img src=overview.png alt="Container Overview"></p><p>In addition to the fields above, you can modify:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Command</th><td>The command to execute inside the container.</td></tr><tr><th>Hostname</th><td>The hostname set inside the container.</td></tr><tr><th>Stop Time</th><td>The grace period (in seconds) to allow a container to stop before killing it. Defaults to 30 seconds.</td></tr><tr><th>User</th><td>Sets the username or group or uid or gid in the container.</td></tr><tr><th>Save Output</th><td>Persist standard output/standard error.</td></tr><tr><th>Privileged</th><td>Grant the container extended privileges.</td></tr><tr><th>Use Init</th><td>Use an init process inside the container as PID 1. This ensures responsibilities of an init system are performed inside the container (e.g., handling exit signals).</td></tr><tr><th>Require Connectivity</th><td>Ensures that the container will not start if it has encrypted volumes and is unable to reach the control plane.</td></tr></tbody></table><h2 id=environment-variables>Environment Variables</h2><p>Environment variables can be added to a container to provide configuration information to the container at runtime.</p><p><img src=envvars.png alt="Environment Variables"></p><h2 id=network>Network</h2><p>The networking section allows you to configure the container&rsquo;s VRF, its port mappings, and its virtual networks and interfaces.</p><p><img src=network.png alt="Container Network"></p><h3 id=host-port-mappings>Host Port Mappings</h3><p>Host port mappings allow you to expose a port on the host to the container. This is useful for exposing a service running in the container to the local network.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Protocol</th><td>The protocol to listen for. If not specified, all traffic is forwarded to the container.</td></tr><tr><th>Host Interface</th><td>The host interface to listen on.</td></tr><tr><th>Host Port</th><td>The host port to listen on.</td></tr><tr><th>Container Port</th><td>The container port that will receive the mapped traffic.</td></tr></tbody></table><h3 id=virtual-networks>Virtual Networks</h3><p>Attaching a virtual network to a container allows virtual network traffic to reach it.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Virtual Network</th><td>The virtual network to attach.</td></tr><tr><th>Virtual IP</th><td>The virtual IP to assign to the container.</td></tr><tr><th>Allow Outbound</th><td>Whether the container should be allowed to make outbound connections into the virtual network.</td></tr></tbody></table><h3 id=virtual-interfaces>Virtual Interfaces</h3><p>A virtual interface can be mapped to a container to forward all traffic.</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The virtual interface name.</td></tr><tr><th>Destination</th><td>The interface destination inside the container.</td></tr></tbody></table><h2 id=mounts>Mounts</h2><p>Mounts allow a container to persist data either as an externally defined <a href=https://trustgrid.github.io/docs/docs/nodes/containers/volumes/>volume</a>, or a bind mount of the node&rsquo;s filesystem.</p><p><img src=mounts.png alt="Container Mounts"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Type</th><td>Either <code>BIND</code> or <code>VOLUME</code>. For type <code>VOLUME</code>, the mount must reference an existing <a href=https://trustgrid.github.io/docs/docs/nodes/containers/volumes/>volume</a>.</td></tr><tr><th>Source</th><td>For volumes, the name of the volume. For bind mounts, the path on the node&rsquo;s filesystem.</td></tr><tr><th>Destination</th><td>The mount location inside the container.</td></tr></tbody></table><h2 id=resource-limits>Resource Limits</h2><p>Containers can be restricted to limit the amount of resources they can consume from the host.</p><p><img src=limits.png alt="Container Resource Limits"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>CPU Max %</th><td>Maximum CPU allocation. Default is 50%.</td></tr><tr><th>Memory Max (MB)</th><td>Hard limit for RAM allocation. Default is 50% of the host&rsquo;s memory.</td></tr><tr><th>Memory High (MB)</th><td>Soft limit for RAM allocation. Cannot exceed hard limit. Default is 45% of the host&rsquo;s memory.</td></tr><tr><th>IO Max Read (B/s)</th><td>Max allowed bytes per second of IO reads. Disabled by default.</td></tr><tr><th>IO Max Write (B/s)</th><td>Max allowed bytes per second of IO writes. Disabled by default.</td></tr><tr><th>IO Max Read Operations (ops/s)</th><td>Max allowed IO read operations per second. Disabled by default.</td></tr><tr><th>IO Max Write Operations (ops/s)</th><td>Max allowed IO write operations per second. Disabled by default.</td></tr></tbody></table><p>Linux ulimits can be set for each container. Supported ulimits are:</p><ul><li>CORE</li><li>DATA</li><li>FSIZE</li><li>LOCKS</li><li>MEMLOCK</li><li>MSGQUE</li><li>NICE</li><li>NOFILE</li><li>NPROC</li><li>RSS</li><li>RTPRIO</li><li>RTTIME</li><li>SIGPENDING</li><li>STACK</li></ul><h2 id=health-check>Health Check</h2><p>A health check can be configured to monitor the container&rsquo;s health. If the health check fails, the container will be restarted.</p><p><img src=health-check.png alt="Container Health Check"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Command</th><td>The command to run. A non-zero return code indicates a health check failure.</td></tr><tr><th>Interval</th><td>The frequency (in seconds) to run the health check.</td></tr><tr><th>Timeout</th><td>How long (in seconds) to wait for the health check to complete. A timeout is considered a failure.</td></tr><tr><th>Start Period</th><td>Grace period (in seconds) during container startup before health checks should start.</td></tr><tr><th>Retries</th><td>Number of allowed health check failures before marking the container unhealthy.</td></tr></tbody></table><h2 id=linux-capabilities>Linux Capabilities</h2><p>Linux capabilities can be added to or removed from a container, allowing fine-grained control over kernel-level features and device access.</p><p><img src=capabilities.png alt="Container Linux Capabilities"></p><h2 id=logging-configuration>Logging Configuration</h2><p>Log files (when persisting container output) are rotated based on a size threshold.</p><p><img src=logging.png alt="Container Logging Configuration"></p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Max File Size (MB)</th><td>The maximum size (in MB) of a log file before it is rotated.</td></tr><tr><th>Max Files</th><td>The maximum number of log files to keep.</td></tr></tbody></table></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5ccaebd2e7402426ca232ab21fd17b0d>1 - Images</h1><p>The images section shows the container images that have been downloaded to the node. They may be deleted to free up space.</p><p><img src=images.png alt="Container Images"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c0435eb8982792b817dbfaa0c19e05a4>2 - Volumes</h1><p>Volumes allow containers to persist data between executions.</p><p><img src=volumes.png alt="Container Volumes"></p><h2 id=create-a-volume>Create a Volume</h2><p><img src=add-volume.png alt="Add Volume Modal"></p><p>Volumes have the following fields:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><th>Name</th><td>The name of the volume.</td></tr><tr><th>Encrypted</th><td>Whether or not to encrypt the volume. Encrypted volumes The type of volume.</td></tr><tr><th>Location</th><td>Optionally, specify a location in the node <a href=https://trustgrid.github.io/docs/docs/nodes/datastore/>data store</a>.</td></tr></tbody></table></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/trustgrid/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/trustgrid aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Trustgrid All Rights Reserved</small>
<small class=ml-1><a href=https://trustgrid.io target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=/docs/js/main.min.f1a20e761a85478d0ce3298a01e295324be8858ef8f2d2baac6737980799b320.js integrity="sha256-8aIOdhqFR40M4ymKAeKVMkvohY748tK6rGc3mAeZsyA=" crossorigin=anonymous></script>
<script src=/docs/js/prism.js></script>
<script src=/docs/js/tabpane-persist.js></script></body></html>