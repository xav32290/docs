<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– Gateway Tools</title><link>/tutorials/gateway-tools/</link><description>Recent content in Gateway Tools on</description><generator>Hugo -- gohugo.io</generator><atom:link href="/tutorials/gateway-tools/index.xml" rel="self" type="application/rss+xml"/><item><title>Tutorials: Monitoring Network Hops to Peers</title><link>/tutorials/gateway-tools/monitoring-network-hops-to-peers/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/tutorials/gateway-tools/monitoring-network-hops-to-peers/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This feature collects traceroute-like data to all its connected peers and stores the results in the Trustgrid cloud for historical review.&lt;/p>
&lt;/div>
&lt;div class="alert alert-info" role="alert">
Network hop monitoring requires version 20220808 or newer to gather the required data.
&lt;/div>
&lt;h2 id="how-it-works">How it Works&lt;/h2>
&lt;ol>
&lt;li>The node will send out packets to each peer&amp;rsquo;s public IP and port (if a gateway) with incrementing Time To Live (TTL) values.&lt;/li>
&lt;li>As the packets pass through each router (or hop) along the way the TTL is decreased by one.&lt;/li>
&lt;li>Any time a router receives a packet with at TTL with the value 1 it will drop the packet and can reply with an ICMP packet saying “Time to Live has been exceeded”&lt;/li>
&lt;li>The node uses these ICMP packets to calculate latency to each hop.&lt;/li>
&lt;/ol>
&lt;h2 id="known-limitations">Known Limitations&lt;/h2>
&lt;p>There are several known limitations with gathering this data:&lt;/p>
&lt;ul>
&lt;li>Routers on the internet are not required to respond with ICMP. This will lead to gaps in the Hop numbers.&lt;/li>
&lt;li>Those that do respond sometimes deprioritize their response which leads to misleading latency numbers.&lt;/li>
&lt;li>
&lt;ul>
&lt;li>If you see a hop with high values, but the the values for higher hop numbers is normal this is not likely the cause of problems&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;ul>
&lt;li>&lt;strong>If a hop has high values and all subsequent hops have higher values this is likely the source of the latency/loss&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Firewall rules have to allow the packets and the responses.&lt;/li>
&lt;li>
&lt;ul>
&lt;li>By utilizing the same TCP port as the gateway, all data collected from edge nodes should be allowed out.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;ul>
&lt;li>Some firewalls/routers have trouble correlating the TCP request with the ICMP response which leads to no data&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Gathering this data requires compute resources on the node and the gateway. Trustgrid recommends only enabling on edge nodes that have frequent latency or packet loss issues as a troubleshooting tool.&lt;/li>
&lt;/ul>
&lt;div class="alert alert-warning" role="alert">
It is not recommended to enable this feature on public gateways or private gateways with a large number of clients
&lt;/div>
&lt;h2 id="enabling-network-hop-monitoring">Enabling Network Hop Monitoring&lt;/h2>
&lt;ol>
&lt;li>Navigate to the node you want to enable&lt;/li>
&lt;li>Verify there version is 20220808 or higher &lt;img src="version-check.png" alt="img">&lt;/li>
&lt;li>Navigate to &lt;code>Gateway&lt;/code> under the &lt;code>System&lt;/code> section&lt;/li>
&lt;li>Enable &lt;code>Network Hop Monitoring&lt;/code> and click &lt;code>Save&lt;/code> &lt;img src="enable-monitor-hops.png" alt="img">&lt;/li>
&lt;/ol>
&lt;h2 id="special-considerations">Special Considerations&lt;/h2>
&lt;h3 id="azure-nodes">Azure Nodes&lt;/h3>
&lt;p>If you enable this on an &lt;strong>edge&lt;/strong> node running on an Azure VM, the default security group rules will prevent responses from intermediate hops on the path. You will still get data from the final hop, which is the target gateway.&lt;/p>
&lt;p>You will need to add an inbound rule to the node&amp;rsquo;s public interface network security group.&lt;/p>
&lt;p>The rule needs the settings shown below:&lt;/p>
&lt;p>&lt;img src="azure-sg.png" alt="img">&lt;/p>
&lt;div class="alert alert-warning" role="alert">
The rule has to allow the destination of any which is not without risk. Make you weight the risks and benefits and are aware what VMs in Azure are using the same security group.
&lt;/div>
&lt;h2 id="viewing-network-hop-data">Viewing Network Hop Data&lt;/h2>
&lt;ol>
&lt;li>Navigate to the node you want to view&lt;/li>
&lt;li>Select &lt;code>Data Plane&lt;/code> on the left&lt;/li>
&lt;li>Select the peer you wish to view data for. You will see a table of hops appear in the bottom right. &lt;img src="network-hops.png" alt="img">&lt;/li>
&lt;li>You can select a time point on the latency chart, and the hops table will update to show the data for that time point. &lt;img src="monitoring.png" alt="img">&lt;/li>
&lt;/ol></description></item><item><title>Tutorials: Ping Remote Node</title><link>/tutorials/gateway-tools/ping-remote-node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/tutorials/gateway-tools/ping-remote-node/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;p>This tool runs a ping from the gateway node to a remote edge node to verify the Trustgrid overlay network is functioning as expected.&lt;/p>
&lt;/div>
&lt;h2 id="usage">Usage&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Navigate to the node from which you want to test connectivity.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Click the &lt;code>Data Plane&lt;/code> link on the left hand side.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Among the gateways (in the case of an edge node) or edge nodes (in the case of a gateway), click &lt;code>Ping&lt;/code> on the row of the node you want to test.&lt;/p>
&lt;p>&lt;img src="ping-remote-node.png" alt="img">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A modal will pop up with options. Click &lt;code>Execute&lt;/code> to start the ping.&lt;/p>
&lt;p>&lt;img src="ping-modal.png" alt="img">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A window will pop up with the ping output. You can adjust the interval to change the time between pings (in seconds), and the size to change how much data is sent.&lt;/p>
&lt;p>&lt;img src="ping-output.png" alt="img">&lt;/p>
&lt;/li>
&lt;/ol></description></item></channel></rss>